/*! For license information please see 8930.c8f56254.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkpromptheroready=self.webpackChunkpromptheroready||[]).push([[8930],{7104:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(77784).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},7118:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(77784).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},18930:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var a=t(89379),r=t(65043),n=t(6742),c=t(8567),l=t(69772),i=t(68181),d=t(47631),o=t(41736),x=t(7104),h=t(50516),m=t(73062),u=t(44919),p=t(28646),y=t(86376),j=t(7118),v=t(82054),N=t(37719),w=t(70579);const f=()=>{const{checkPermission:e}=(0,d.z8)(),[s,t]=(0,r.useState)({totalSubscribers:0,freeUsers:0,paidUsers:0,trialUsers:0,mrr:0,arr:0,churnRate:0,conversionRate:0,planBreakdown:[],revenueGrowth:{monthly:0,quarterly:0,yearly:0},countryRevenue:[]}),[f,g]=(0,r.useState)(!0);(0,r.useEffect)(()=>{b()},[]);const b=async()=>{try{g(!0);const{data:e,error:s}=await o.ND.from("user_settings").select("subscription_tier, subscription_status, created_at, settings").not("user_id","is",null);if(s)throw s;const r=(null===e||void 0===e?void 0:e.length)||0,n=(null===e||void 0===e?void 0:e.filter(e=>"free"===e.subscription_tier).length)||0,c=(null===e||void 0===e?void 0:e.filter(e=>"free"!==e.subscription_tier&&"active"===e.subscription_status).length)||0,l=(null===e||void 0===e?void 0:e.filter(e=>"trial"===e.subscription_status).length)||0,i=(null===e||void 0===e?void 0:e.reduce((e,s)=>{const t=s.subscription_tier||"free";return e[t]=(e[t]||0)+1,e},{}))||{},d={free:0,starter:999,pro:2999,enterprise:9999},x=Object.entries(i).map(e=>{let[s,t]=e;return{plan:s.charAt(0).toUpperCase()+s.slice(1),users:t,revenue:t*(d[s]||0),percentage:t/r*100}}),h=x.reduce((e,s)=>e+s.revenue,0),m=12*h,u={churnRate:5.2,conversionRate:12.8,revenueGrowth:{monthly:15.3,quarterly:42.7,yearly:156.8},countryRevenue:[{country:"India",revenue:Math.floor(.4*h),users:Math.floor(.4*c)},{country:"United States",revenue:Math.floor(.3*h),users:Math.floor(.3*c)},{country:"United Kingdom",revenue:Math.floor(.15*h),users:Math.floor(.15*c)},{country:"Canada",revenue:Math.floor(.1*h),users:Math.floor(.1*c)},{country:"Others",revenue:Math.floor(.05*h),users:Math.floor(.05*c)}]};t((0,a.A)({totalSubscribers:r,freeUsers:n,paidUsers:c,trialUsers:l,mrr:h,arr:m,planBreakdown:x},u))}catch(e){console.error("Error fetching subscription data:",e)}finally{g(!1)}};return f?(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Subscription Analytics"}),(0,w.jsx)("div",{className:"animate-pulse h-8 w-32 bg-white/10 rounded"})]}),(0,w.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[...Array(8)].map((e,s)=>(0,w.jsx)(n.Zp,{className:"workspace-card animate-pulse",children:(0,w.jsx)(n.Wu,{className:"p-6",children:(0,w.jsx)("div",{className:"h-16 bg-white/10 rounded"})})},s))})]}):(0,w.jsxs)("div",{className:"space-y-6",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Subscription Analytics"}),(0,w.jsx)("p",{className:"text-gray-400 mt-1",children:"Revenue metrics and subscription performance"})]}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsxs)(l.$,{onClick:()=>{const e=[["Plan","Users","Revenue (INR)","Percentage"],...s.planBreakdown.map(e=>[e.plan,e.users.toString(),e.revenue.toString(),e.percentage.toFixed(1)+"%"])].map(e=>e.join(",")).join("\n"),t=new Blob([e],{type:"text/csv"}),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download="subscription-analytics-".concat((new Date).toISOString().split("T")[0],".csv"),r.click(),window.URL.revokeObjectURL(a)},variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:[(0,w.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,w.jsxs)(l.$,{onClick:b,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:[(0,w.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Refresh"]})]})]}),(0,w.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,w.jsxs)(n.Zp,{className:"workspace-card",children:[(0,w.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,w.jsx)(n.ZB,{className:"text-sm font-medium text-gray-300",children:"Monthly Recurring Revenue"}),(0,w.jsx)(m.A,{className:"h-4 w-4 text-green-400"})]}),(0,w.jsxs)(n.Wu,{children:[(0,w.jsxs)("div",{className:"text-2xl font-bold text-white",children:["\u20b9",s.mrr.toLocaleString()]}),(0,w.jsxs)("p",{className:"text-xs text-green-400 flex items-center",children:[(0,w.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"+",s.revenueGrowth.monthly,"% from last month"]})]})]}),(0,w.jsxs)(n.Zp,{className:"workspace-card",children:[(0,w.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,w.jsx)(n.ZB,{className:"text-sm font-medium text-gray-300",children:"Annual Recurring Revenue"}),(0,w.jsx)(p.A,{className:"h-4 w-4 text-green-400"})]}),(0,w.jsxs)(n.Wu,{children:[(0,w.jsxs)("div",{className:"text-2xl font-bold text-white",children:["\u20b9",s.arr.toLocaleString()]}),(0,w.jsxs)("p",{className:"text-xs text-green-400 flex items-center",children:[(0,w.jsx)(u.A,{className:"h-3 w-3 mr-1"}),"+",s.revenueGrowth.yearly,"% YoY"]})]})]}),(0,w.jsxs)(n.Zp,{className:"workspace-card",children:[(0,w.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,w.jsx)(n.ZB,{className:"text-sm font-medium text-gray-300",children:"Paid Subscribers"}),(0,w.jsx)(y.A,{className:"h-4 w-4 text-green-400"})]}),(0,w.jsxs)(n.Wu,{children:[(0,w.jsx)("div",{className:"text-2xl font-bold text-white",children:s.paidUsers.toLocaleString()}),(0,w.jsxs)("p",{className:"text-xs text-gray-400",children:[s.trialUsers," on trial"]})]})]}),(0,w.jsxs)(n.Zp,{className:"workspace-card",children:[(0,w.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,w.jsx)(n.ZB,{className:"text-sm font-medium text-gray-300",children:"Conversion Rate"}),(0,w.jsx)(u.A,{className:"h-4 w-4 text-green-400"})]}),(0,w.jsxs)(n.Wu,{children:[(0,w.jsxs)("div",{className:"text-2xl font-bold text-white",children:[s.conversionRate,"%"]}),(0,w.jsx)("p",{className:"text-xs text-gray-400",children:"Free to paid conversion"})]})]})]}),(0,w.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,w.jsxs)(n.Zp,{className:"workspace-card",children:[(0,w.jsx)(n.aR,{children:(0,w.jsxs)(n.ZB,{className:"text-white flex items-center gap-2",children:[(0,w.jsx)(j.A,{className:"h-5 w-5 text-green-400"}),"Subscription Plans"]})}),(0,w.jsx)(n.Wu,{className:"space-y-4",children:s.planBreakdown.map((e,s)=>(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("span",{className:"text-gray-300",children:e.plan}),(0,w.jsxs)(c.E,{variant:"secondary",className:"text-xs",children:[e.users," users"]})]}),(0,w.jsxs)("span",{className:"text-white",children:["\u20b9",e.revenue.toLocaleString(),"/mo"]})]}),(0,w.jsx)(i.k,{value:e.percentage,className:"h-2"}),(0,w.jsxs)("p",{className:"text-xs text-gray-400",children:[e.percentage.toFixed(1),"% of total users"]})]},e.plan))})]}),(0,w.jsxs)(n.Zp,{className:"workspace-card",children:[(0,w.jsx)(n.aR,{children:(0,w.jsxs)(n.ZB,{className:"text-white flex items-center gap-2",children:[(0,w.jsx)(v.A,{className:"h-5 w-5 text-green-400"}),"Health Metrics"]})}),(0,w.jsxs)(n.Wu,{className:"space-y-4",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("span",{className:"text-gray-300",children:"Churn Rate"}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsxs)("span",{className:"text-white",children:[s.churnRate,"%"]}),s.churnRate<10?(0,w.jsx)(v.A,{className:"h-4 w-4 text-green-400"}):(0,w.jsx)(N.A,{className:"h-4 w-4 text-yellow-400"})]})]}),(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("span",{className:"text-gray-300",children:"Customer Lifetime Value"}),(0,w.jsxs)("span",{className:"text-white",children:["\u20b9",Math.floor(s.mrr/s.paidUsers*24).toLocaleString()]})]}),(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("span",{className:"text-gray-300",children:"Average Revenue Per User"}),(0,w.jsxs)("span",{className:"text-white",children:["\u20b9",Math.floor(s.mrr/s.paidUsers).toLocaleString()]})]}),(0,w.jsxs)("div",{className:"space-y-2",children:[(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsx)("span",{className:"text-gray-300",children:"Revenue Growth"}),(0,w.jsxs)("span",{className:"text-green-400",children:["+",s.revenueGrowth.monthly,"%"]})]}),(0,w.jsx)(i.k,{value:Math.min(s.revenueGrowth.monthly,100),className:"h-2"})]})]})]})]}),(0,w.jsxs)(n.Zp,{className:"workspace-card",children:[(0,w.jsx)(n.aR,{children:(0,w.jsxs)(n.ZB,{className:"text-white flex items-center gap-2",children:[(0,w.jsx)(m.A,{className:"h-5 w-5 text-green-400"}),"Revenue by Country"]})}),(0,w.jsx)(n.Wu,{children:(0,w.jsx)("div",{className:"space-y-4",children:s.countryRevenue.map((e,t)=>(0,w.jsxs)("div",{className:"flex items-center justify-between",children:[(0,w.jsxs)("div",{className:"flex items-center gap-3",children:[(0,w.jsx)("span",{className:"text-gray-300 min-w-[100px]",children:e.country}),(0,w.jsxs)("div",{className:"flex items-center gap-2",children:[(0,w.jsx)("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:(0,w.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(e.revenue/s.mrr*100,"%")}})}),(0,w.jsxs)("span",{className:"text-xs text-gray-400",children:[e.users," users"]})]})]}),(0,w.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.revenue.toLocaleString()]})]},e.country))})})]})]})}},28646:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(77784).A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},44919:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(77784).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},73062:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(77784).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},82054:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(77784).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},86376:(e,s,t)=>{t.d(s,{A:()=>a});const a=(0,t(77784).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])}}]);
//# sourceMappingURL=8930.c8f56254.chunk.js.map