"use strict";(self.webpackChunkpromptheroready=self.webpackChunkpromptheroready||[]).push([[8375],{28375:(e,t,s)=>{s.r(t),s.d(t,{default:()=>_});var a=s(89379),l=s(9950),r=s(16255),i=s(60348),c=s(38493),n=s(14697),d=s(89615),o=s(41591),h=s(95797),x=s(69293),u=s(32180),m=s(27549),p=s(21273),g=s(66987),j=s(52607),b=s(71742),v=s(13147),w=s(67637),y=s(81830),N=s(40978),f=s(84814),C=s(44414);const k=["MVP Studio","IdeaForge","AI Tools Hub","General","Marketing","Technical","Business"],A=["UI Layout","Journey Map","Tech Stack","Feature List","Business Plan","Marketing Copy","Code Snippet","Analysis"],_=()=>{const{adminUser:e,checkPermission:t}=(0,u.z8)(),{toast:s}=(0,p.dj)(),[_,S]=(0,l.useState)([]),[T,F]=(0,l.useState)(!0),[E,J]=(0,l.useState)(""),[P,D]=(0,l.useState)("all"),[L,q]=(0,l.useState)("all"),[V,$]=(0,l.useState)(!1),[z,M]=(0,l.useState)(null),[O,U]=(0,l.useState)({title:"",content:"",category:"",tags:"",use_case:"",output_type:"",status:"draft"});(0,l.useEffect)(()=>{B()},[]);const B=async()=>{try{F(!0);const{data:e,error:t}=await m.ND.from("prompt_templates").select("*").order("updated_at",{ascending:!1});if(t)throw t;S(e||[])}catch(e){console.error("Error fetching templates:",e),s({title:"Error",description:"Failed to fetch prompt templates",variant:"destructive"})}finally{F(!1)}},Z=()=>{U({title:"",content:"",category:"",tags:"",use_case:"",output_type:"",status:"draft"})},I=_.filter(e=>{const t=e.title.toLowerCase().includes(E.toLowerCase())||e.content.toLowerCase().includes(E.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(E.toLowerCase())),s="all"===P||e.category===P,a="all"===L||e.status===L;return t&&s&&a}),W=e=>{switch(e){case"published":return(0,C.jsx)(i.E,{className:"bg-green-600/20 text-green-400 border-green-500/30",children:"Published"});case"draft":return(0,C.jsx)(i.E,{className:"bg-yellow-600/20 text-yellow-400 border-yellow-500/30",children:"Draft"});case"archived":return(0,C.jsx)(i.E,{className:"bg-gray-600/20 text-gray-400 border-gray-500/30",children:"Archived"});default:return(0,C.jsx)(i.E,{variant:"secondary",children:e})}};return T?(0,C.jsxs)("div",{className:"space-y-6",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Prompt Templates"}),(0,C.jsx)("div",{className:"animate-pulse h-8 w-32 bg-white/10 rounded"})]}),(0,C.jsx)("div",{className:"grid gap-6",children:[...Array(3)].map((e,t)=>(0,C.jsx)(r.Zp,{className:"workspace-card animate-pulse",children:(0,C.jsx)(r.Wu,{className:"p-6",children:(0,C.jsx)("div",{className:"h-24 bg-white/10 rounded"})})},t))})]}):(0,C.jsxs)("div",{className:"space-y-6",children:[(0,C.jsxs)("div",{className:"flex items-center justify-between",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Prompt Templates"}),(0,C.jsx)("p",{className:"text-gray-400 mt-1",children:"Manage system-wide prompt templates for all modules"})]}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsxs)(c.$,{onClick:B,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:[(0,C.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,C.jsxs)(x.lG,{open:V,onOpenChange:$,children:[(0,C.jsx)(x.zM,{asChild:!0,children:(0,C.jsxs)(c.$,{className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,C.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Create Template"]})}),(0,C.jsxs)(x.Cf,{className:"max-w-2xl bg-black/90 backdrop-blur-xl border-white/10 text-white",children:[(0,C.jsx)(x.c7,{children:(0,C.jsx)(x.L3,{children:"Create New Prompt Template"})}),(0,C.jsxs)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"title",children:"Title"}),(0,C.jsx)(n.p,{id:"title",value:O.title,onChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{title:e.target.value})),className:"bg-black/20 border-white/20 text-white",placeholder:"Enter template title"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"category",children:"Category"}),(0,C.jsxs)(h.l6,{value:O.category,onValueChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{category:e})),children:[(0,C.jsx)(h.bq,{className:"bg-black/20 border-white/20 text-white",children:(0,C.jsx)(h.yv,{placeholder:"Select category"})}),(0,C.jsx)(h.gC,{className:"bg-black/90 border-white/20",children:k.map(e=>(0,C.jsx)(h.eb,{value:e,children:e},e))})]})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"content",children:"Template Content"}),(0,C.jsx)(d.T,{id:"content",value:O.content,onChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{content:e.target.value})),className:"bg-black/20 border-white/20 text-white min-h-[200px]",placeholder:"Enter the prompt template content..."})]}),(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"use_case",children:"Use Case"}),(0,C.jsx)(n.p,{id:"use_case",value:O.use_case,onChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{use_case:e.target.value})),className:"bg-black/20 border-white/20 text-white",placeholder:"e.g., Homepage design"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"output_type",children:"Output Type"}),(0,C.jsxs)(h.l6,{value:O.output_type,onValueChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{output_type:e})),children:[(0,C.jsx)(h.bq,{className:"bg-black/20 border-white/20 text-white",children:(0,C.jsx)(h.yv,{placeholder:"Select output type"})}),(0,C.jsx)(h.gC,{className:"bg-black/90 border-white/20",children:A.map(e=>(0,C.jsx)(h.eb,{value:e,children:e},e))})]})]})]}),(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"tags",children:"Tags (comma-separated)"}),(0,C.jsx)(n.p,{id:"tags",value:O.tags,onChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{tags:e.target.value})),className:"bg-black/20 border-white/20 text-white",placeholder:"ui, design, homepage"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"status",children:"Status"}),(0,C.jsxs)(h.l6,{value:O.status,onValueChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{status:e})),children:[(0,C.jsx)(h.bq,{className:"bg-black/20 border-white/20 text-white",children:(0,C.jsx)(h.yv,{})}),(0,C.jsxs)(h.gC,{className:"bg-black/90 border-white/20",children:[(0,C.jsx)(h.eb,{value:"draft",children:"Draft"}),(0,C.jsx)(h.eb,{value:"published",children:"Published"}),(0,C.jsx)(h.eb,{value:"archived",children:"Archived"})]})]})]})]}),(0,C.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,C.jsx)(c.$,{variant:"outline",onClick:()=>{$(!1),Z()},className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),(0,C.jsxs)(c.$,{onClick:async()=>{try{const{data:t,error:a}=await m.ND.from("prompt_templates").insert([{title:O.title,content:O.content,category:O.category,tags:O.tags.split(",").map(e=>e.trim()).filter(Boolean),use_case:O.use_case,output_type:O.output_type,status:O.status,created_by:null===e||void 0===e?void 0:e.id}]).select().single();if(a)throw a;S(e=>[t,...e]),$(!1),Z(),s({title:"Success",description:"Prompt template created successfully"})}catch(t){console.error("Error creating template:",t),s({title:"Error",description:"Failed to create prompt template",variant:"destructive"})}},className:"bg-green-600 hover:bg-green-700 text-white",disabled:!O.title||!O.content||!O.category,children:[(0,C.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Create Template"]})]})]})]})]})]})]}),(0,C.jsx)(r.Zp,{className:"workspace-card",children:(0,C.jsx)(r.Wu,{className:"p-4",children:(0,C.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,C.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,C.jsxs)("div",{className:"relative",children:[(0,C.jsx)(v.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,C.jsx)(n.p,{placeholder:"Search templates...",value:E,onChange:e=>J(e.target.value),className:"pl-10 bg-black/20 border-white/20 text-white"})]})}),(0,C.jsxs)(h.l6,{value:P,onValueChange:D,children:[(0,C.jsx)(h.bq,{className:"w-[150px] bg-black/20 border-white/20 text-white",children:(0,C.jsx)(h.yv,{placeholder:"Category"})}),(0,C.jsxs)(h.gC,{className:"bg-black/90 border-white/20",children:[(0,C.jsx)(h.eb,{value:"all",children:"All Categories"}),k.map(e=>(0,C.jsx)(h.eb,{value:e,children:e},e))]})]}),(0,C.jsxs)(h.l6,{value:L,onValueChange:q,children:[(0,C.jsx)(h.bq,{className:"w-[120px] bg-black/20 border-white/20 text-white",children:(0,C.jsx)(h.yv,{placeholder:"Status"})}),(0,C.jsxs)(h.gC,{className:"bg-black/90 border-white/20",children:[(0,C.jsx)(h.eb,{value:"all",children:"All Status"}),(0,C.jsx)(h.eb,{value:"published",children:"Published"}),(0,C.jsx)(h.eb,{value:"draft",children:"Draft"}),(0,C.jsx)(h.eb,{value:"archived",children:"Archived"})]})]})]})})}),(0,C.jsx)("div",{className:"space-y-4",children:0===I.length?(0,C.jsx)(r.Zp,{className:"workspace-card",children:(0,C.jsxs)(r.Wu,{className:"p-8 text-center",children:[(0,C.jsx)(w.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,C.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No templates found"}),(0,C.jsx)("p",{className:"text-gray-400",children:E||"all"!==P||"all"!==L?"Try adjusting your search or filters":"Create your first prompt template to get started"})]})}):I.map(e=>(0,C.jsxs)(r.Zp,{className:"workspace-card",children:[(0,C.jsx)(r.aR,{children:(0,C.jsxs)("div",{className:"flex items-start justify-between",children:[(0,C.jsxs)("div",{className:"flex-1",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,C.jsx)(r.ZB,{className:"text-white",children:e.title}),W(e.status),(0,C.jsx)(i.E,{variant:"outline",className:"text-xs border-white/20 text-gray-300",children:e.category})]}),(0,C.jsx)("p",{className:"text-gray-400 text-sm",children:e.use_case}),(0,C.jsx)("div",{className:"flex items-center gap-2 mt-2",children:e.tags.map(e=>(0,C.jsx)(i.E,{variant:"secondary",className:"text-xs bg-white/10 text-gray-300",children:e},e))})]}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{U({title:"".concat(e.title," (Copy)"),content:e.content,category:e.category,tags:e.tags.join(", "),use_case:e.use_case,output_type:e.output_type,status:"draft"}),$(!0)})(e),className:"text-gray-400 hover:text-white hover:bg-white/10",children:(0,C.jsx)(y.A,{className:"h-4 w-4"})}),(0,C.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>(e=>{M(e),U({title:e.title,content:e.content,category:e.category,tags:e.tags.join(", "),use_case:e.use_case,output_type:e.output_type,status:e.status})})(e),className:"text-gray-400 hover:text-white hover:bg-white/10",children:(0,C.jsx)(N.A,{className:"h-4 w-4"})}),(0,C.jsx)(c.$,{variant:"ghost",size:"sm",onClick:()=>(async e=>{if(confirm("Are you sure you want to delete this template?"))try{const{error:t}=await m.ND.from("prompt_templates").delete().eq("id",e);if(t)throw t;S(t=>t.filter(t=>t.id!==e)),s({title:"Success",description:"Prompt template deleted successfully"})}catch(t){console.error("Error deleting template:",t),s({title:"Error",description:"Failed to delete prompt template",variant:"destructive"})}})(e.id),className:"text-gray-400 hover:text-red-400 hover:bg-red-500/10",children:(0,C.jsx)(f.A,{className:"h-4 w-4"})})]})]})}),(0,C.jsxs)(r.Wu,{children:[(0,C.jsx)("div",{className:"bg-black/20 rounded-lg p-4 border border-white/10",children:(0,C.jsx)("p",{className:"text-gray-300 text-sm whitespace-pre-wrap",children:e.content.length>200?"".concat(e.content.substring(0,200),"..."):e.content})}),(0,C.jsxs)("div",{className:"flex items-center justify-between mt-4 text-xs text-gray-400",children:[(0,C.jsxs)("span",{children:["Output: ",e.output_type]}),(0,C.jsxs)("span",{children:["Updated: ",new Date(e.updated_at).toLocaleDateString()]})]})]})]},e.id))}),(0,C.jsx)(x.lG,{open:!!z,onOpenChange:e=>!e&&M(null),children:(0,C.jsxs)(x.Cf,{className:"max-w-2xl bg-black/90 backdrop-blur-xl border-white/10 text-white",children:[(0,C.jsx)(x.c7,{children:(0,C.jsx)(x.L3,{children:"Edit Prompt Template"})}),(0,C.jsxs)("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:[(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"edit-title",children:"Title"}),(0,C.jsx)(n.p,{id:"edit-title",value:O.title,onChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{title:e.target.value})),className:"bg-black/20 border-white/20 text-white"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"edit-category",children:"Category"}),(0,C.jsxs)(h.l6,{value:O.category,onValueChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{category:e})),children:[(0,C.jsx)(h.bq,{className:"bg-black/20 border-white/20 text-white",children:(0,C.jsx)(h.yv,{})}),(0,C.jsx)(h.gC,{className:"bg-black/90 border-white/20",children:k.map(e=>(0,C.jsx)(h.eb,{value:e,children:e},e))})]})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"edit-content",children:"Template Content"}),(0,C.jsx)(d.T,{id:"edit-content",value:O.content,onChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{content:e.target.value})),className:"bg-black/20 border-white/20 text-white min-h-[200px]"})]}),(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"edit-use_case",children:"Use Case"}),(0,C.jsx)(n.p,{id:"edit-use_case",value:O.use_case,onChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{use_case:e.target.value})),className:"bg-black/20 border-white/20 text-white"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"edit-output_type",children:"Output Type"}),(0,C.jsxs)(h.l6,{value:O.output_type,onValueChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{output_type:e})),children:[(0,C.jsx)(h.bq,{className:"bg-black/20 border-white/20 text-white",children:(0,C.jsx)(h.yv,{})}),(0,C.jsx)(h.gC,{className:"bg-black/90 border-white/20",children:A.map(e=>(0,C.jsx)(h.eb,{value:e,children:e},e))})]})]})]}),(0,C.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"edit-tags",children:"Tags (comma-separated)"}),(0,C.jsx)(n.p,{id:"edit-tags",value:O.tags,onChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{tags:e.target.value})),className:"bg-black/20 border-white/20 text-white"})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)(o.J,{htmlFor:"edit-status",children:"Status"}),(0,C.jsxs)(h.l6,{value:O.status,onValueChange:e=>U(t=>(0,a.A)((0,a.A)({},t),{},{status:e})),children:[(0,C.jsx)(h.bq,{className:"bg-black/20 border-white/20 text-white",children:(0,C.jsx)(h.yv,{})}),(0,C.jsxs)(h.gC,{className:"bg-black/90 border-white/20",children:[(0,C.jsx)(h.eb,{value:"draft",children:"Draft"}),(0,C.jsx)(h.eb,{value:"published",children:"Published"}),(0,C.jsx)(h.eb,{value:"archived",children:"Archived"})]})]})]})]}),(0,C.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,C.jsx)(c.$,{variant:"outline",onClick:()=>{M(null),Z()},className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"}),(0,C.jsxs)(c.$,{onClick:async()=>{if(z)try{const{data:e,error:t}=await m.ND.from("prompt_templates").update({title:O.title,content:O.content,category:O.category,tags:O.tags.split(",").map(e=>e.trim()).filter(Boolean),use_case:O.use_case,output_type:O.output_type,status:O.status,updated_at:(new Date).toISOString()}).eq("id",z.id).select().single();if(t)throw t;S(t=>t.map(t=>t.id===z.id?e:t)),M(null),Z(),s({title:"Success",description:"Prompt template updated successfully"})}catch(e){console.error("Error updating template:",e),s({title:"Error",description:"Failed to update prompt template",variant:"destructive"})}},className:"bg-green-600 hover:bg-green-700 text-white",disabled:!O.title||!O.content||!O.category,children:[(0,C.jsx)(b.A,{className:"mr-2 h-4 w-4"}),"Update Template"]})]})]})]})})]})}}}]);