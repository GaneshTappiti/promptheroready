"use strict";(self.webpackChunkpromptheroready=self.webpackChunkpromptheroready||[]).push([[8497],{68497:(e,s,a)=>{a.r(s),a.d(s,{default:()=>y});var t=a(9950),l=a(16255),r=a(60348),c=a(38493),i=a(94208),n=a(32180),d=a(27549),x=a(29975),o=a(61041),m=a(58406),h=a(67637),j=a(18134),p=a(45833),u=a(6890),w=a(40602),N=a(25692),g=a(77737),f=a(44414);const y=()=>{const{adminUser:e,isSuperAdmin:s,checkPermission:a}=(0,n.z8)(),[y,b]=(0,t.useState)({totalUsers:0,activeUsers:0,paidUsers:0,freeUsers:0,totalIdeas:0,totalPrompts:0,systemHealth:"healthy",apiUsage:0}),[v,A]=(0,t.useState)(!0);(0,t.useEffect)(()=>{k()},[]);const k=async()=>{try{A(!0);const{data:e,error:s}=await d.ND.from("user_settings").select("subscription_tier, created_at").not("user_id","is",null);if(s)throw s;const a=(null===e||void 0===e?void 0:e.length)||0,t=(null===e||void 0===e?void 0:e.filter(e=>"free"!==e.subscription_tier).length)||0,l=a-t,r=new Date;r.setDate(r.getDate()-30);const c=Math.floor(.7*a),{count:i,error:n}=await d.ND.from("ideas").select("*",{count:"exact",head:!0});n&&"PGRST116"!==n.code&&console.warn("Could not fetch idea count:",n);const{count:x,error:o}=await d.ND.from("prompt_templates").select("*",{count:"exact",head:!0});o&&"PGRST116"!==o.code&&console.warn("Could not fetch prompt count:",o),b({totalUsers:a,activeUsers:c,paidUsers:t,freeUsers:l,totalIdeas:i||0,totalPrompts:x||0,systemHealth:"healthy",apiUsage:Math.floor(100*Math.random())})}catch(e){console.error("Error fetching dashboard stats:",e)}finally{A(!1)}};return v?(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"}),(0,f.jsx)("div",{className:"animate-pulse h-8 w-32 bg-white/10 rounded"})]}),(0,f.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[...Array(4)].map((e,s)=>(0,f.jsx)(l.Zp,{className:"workspace-card animate-pulse",children:(0,f.jsx)(l.Wu,{className:"p-6",children:(0,f.jsx)("div",{className:"h-16 bg-white/10 rounded"})})},s))})]}):(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"}),(0,f.jsxs)("p",{className:"text-gray-400 mt-1",children:["Welcome back, ",null===e||void 0===e?void 0:e.email," \u2022 ","super_admin"===(null===e||void 0===e?void 0:e.role)?"Super Admin":"Admin"]})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"healthy":return(0,f.jsx)(r.E,{className:"bg-green-600/20 text-green-400 border-green-500/30",children:"Healthy"});case"warning":return(0,f.jsx)(r.E,{className:"bg-yellow-600/20 text-yellow-400 border-yellow-500/30",children:"Warning"});case"critical":return(0,f.jsx)(r.E,{className:"bg-red-600/20 text-red-400 border-red-500/30",children:"Critical"});default:return(0,f.jsx)(r.E,{variant:"secondary",children:"Unknown"})}})(y.systemHealth),(0,f.jsx)(c.$,{onClick:k,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:"Refresh"})]})]}),(0,f.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,f.jsxs)(l.Zp,{className:"workspace-card",children:[(0,f.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,f.jsx)(l.ZB,{className:"text-sm font-medium text-gray-300",children:"Total Users"}),(0,f.jsx)(x.A,{className:"h-4 w-4 text-green-400"})]}),(0,f.jsxs)(l.Wu,{children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-white",children:y.totalUsers.toLocaleString()}),(0,f.jsxs)("p",{className:"text-xs text-gray-400",children:[y.activeUsers," active in last 30 days"]})]})]}),(0,f.jsxs)(l.Zp,{className:"workspace-card",children:[(0,f.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,f.jsx)(l.ZB,{className:"text-sm font-medium text-gray-300",children:"Subscriptions"}),(0,f.jsx)(o.A,{className:"h-4 w-4 text-green-400"})]}),(0,f.jsxs)(l.Wu,{children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-white",children:y.paidUsers}),(0,f.jsxs)("p",{className:"text-xs text-gray-400",children:[y.freeUsers," free users"]})]})]}),(0,f.jsxs)(l.Zp,{className:"workspace-card",children:[(0,f.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,f.jsx)(l.ZB,{className:"text-sm font-medium text-gray-300",children:"Ideas Created"}),(0,f.jsx)(m.A,{className:"h-4 w-4 text-green-400"})]}),(0,f.jsxs)(l.Wu,{children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-white",children:y.totalIdeas.toLocaleString()}),(0,f.jsx)("p",{className:"text-xs text-gray-400",children:"Across all users"})]})]}),(0,f.jsxs)(l.Zp,{className:"workspace-card",children:[(0,f.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,f.jsx)(l.ZB,{className:"text-sm font-medium text-gray-300",children:"Prompt Templates"}),(0,f.jsx)(h.A,{className:"h-4 w-4 text-green-400"})]}),(0,f.jsxs)(l.Wu,{children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-white",children:y.totalPrompts}),(0,f.jsx)("p",{className:"text-xs text-gray-400",children:"System templates"})]})]})]}),(0,f.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,f.jsxs)(l.Zp,{className:"workspace-card",children:[(0,f.jsx)(l.aR,{children:(0,f.jsxs)(l.ZB,{className:"text-white flex items-center gap-2",children:[(0,f.jsx)(j.A,{className:"h-5 w-5 text-green-400"}),"System Health"]})}),(0,f.jsxs)(l.Wu,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:"API Response Time"}),(0,f.jsx)("span",{className:"text-green-400",children:"~120ms"})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:"Database Status"}),(0,f.jsx)(p.A,{className:"h-4 w-4 text-green-400"})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:"AI Provider Status"}),(0,f.jsx)(p.A,{className:"h-4 w-4 text-green-400"})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:"API Usage"}),(0,f.jsxs)("span",{className:"text-white",children:[y.apiUsage,"%"]})]}),(0,f.jsx)(i.k,{value:y.apiUsage,className:"h-2"})]})]})]}),(0,f.jsxs)(l.Zp,{className:"workspace-card",children:[(0,f.jsx)(l.aR,{children:(0,f.jsxs)(l.ZB,{className:"text-white flex items-center gap-2",children:[(0,f.jsx)(u.A,{className:"h-5 w-5 text-green-400"}),"Quick Actions"]})}),(0,f.jsxs)(l.Wu,{className:"space-y-3",children:[a("canManagePrompts")&&(0,f.jsxs)(c.$,{variant:"outline",className:"w-full justify-start border-white/20 text-white hover:bg-white/10",onClick:()=>window.location.href="/admin/prompts",children:[(0,f.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Manage Prompt Templates"]}),a("canManageTools")&&(0,f.jsxs)(c.$,{variant:"outline",className:"w-full justify-start border-white/20 text-white hover:bg-white/10",onClick:()=>window.location.href="/admin/tools",children:[(0,f.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Update AI Tools Directory"]}),s&&(0,f.jsxs)(c.$,{variant:"outline",className:"w-full justify-start border-white/20 text-white hover:bg-white/10",onClick:()=>window.location.href="/admin/settings",children:[(0,f.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Platform Settings"]}),s&&(0,f.jsxs)(c.$,{variant:"outline",className:"w-full justify-start border-white/20 text-white hover:bg-white/10",onClick:()=>window.location.href="/admin/performance",children:[(0,f.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Database Performance"]})]})]})]}),(0,f.jsxs)(l.Zp,{className:"workspace-card",children:[(0,f.jsx)(l.aR,{children:(0,f.jsxs)(l.ZB,{className:"text-white flex items-center gap-2",children:[(0,f.jsx)(g.A,{className:"h-5 w-5 text-green-400"}),"Recent Activity"]})}),(0,f.jsx)(l.Wu,{children:(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,f.jsx)("div",{className:"h-2 w-2 bg-green-400 rounded-full"}),(0,f.jsx)("span",{className:"text-gray-300",children:"System health check completed"}),(0,f.jsx)("span",{className:"text-gray-500 ml-auto",children:"2 minutes ago"})]}),(0,f.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,f.jsx)("div",{className:"h-2 w-2 bg-blue-400 rounded-full"}),(0,f.jsx)("span",{className:"text-gray-300",children:"New prompt template published"}),(0,f.jsx)("span",{className:"text-gray-500 ml-auto",children:"1 hour ago"})]}),(0,f.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,f.jsx)("div",{className:"h-2 w-2 bg-yellow-400 rounded-full"}),(0,f.jsx)("span",{className:"text-gray-300",children:"AI tools directory updated"}),(0,f.jsx)("span",{className:"text-gray-500 ml-auto",children:"3 hours ago"})]})]})})]})]})}}}]);