"use strict";(self.webpackChunkpromptheroready=self.webpackChunkpromptheroready||[]).push([[2107],{2107:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var t=a(89379),r=a(9950),c=a(16255),i=a(38493),l=a(94208),n=a(32180),d=a(27549),x=a(66987),o=a(29975),h=a(58406),m=a(19201),j=a(6890),g=a(76274),p=a(18134),u=a(29126),N=a(225),v=a(14664),f=a(44414);const w=()=>{const{isSuperAdmin:e}=(0,n.z8)(),[s,a]=(0,r.useState)({totalUsers:0,activeUsers:{daily:0,weekly:0,monthly:0},newSignups:{today:0,thisWeek:0,thisMonth:0},conversionRates:{ideaToForge:0,forgeToMVP:0,freeToTrial:0,trialToPaid:0},usagePatterns:{avgSessionTime:0,avgIdeasPerUser:0,avgPromptsPerUser:0,mostUsedFeatures:[]},demographics:{countries:[],devices:[]}}),[w,y]=(0,r.useState)(!0);(0,r.useEffect)(()=>{e&&b()},[e]);const b=async()=>{try{y(!0);const{data:e,error:s}=await d.ND.from("user_settings").select("subscription_tier, created_at, settings").not("user_id","is",null);if(s)throw s;const r=(null===e||void 0===e?void 0:e.length)||0,c=new Date,i=new Date(c.getFullYear(),c.getMonth(),c.getDate()),l=new Date(i.getTime()-6048e5),n=new Date(i.getTime()-2592e6),x={today:(null===e||void 0===e?void 0:e.filter(e=>new Date(e.created_at)>=i).length)||0,thisWeek:(null===e||void 0===e?void 0:e.filter(e=>new Date(e.created_at)>=l).length)||0,thisMonth:(null===e||void 0===e?void 0:e.filter(e=>new Date(e.created_at)>=n).length)||0},{count:o,error:h}=await d.ND.from("ideas").select("*",{count:"exact",head:!0}),{count:m,error:j}=await d.ND.from("prompt_history").select("*",{count:"exact",head:!0}),g=r>0?(o||0)/r:0,p=r>0?(m||0)/r:0,u={activeUsers:{daily:Math.floor(.15*r),weekly:Math.floor(.35*r),monthly:Math.floor(.65*r)},conversionRates:{ideaToForge:45.2,forgeToMVP:28.7,freeToTrial:12.3,trialToPaid:8.9},usagePatterns:{avgSessionTime:24.5,avgIdeasPerUser:Math.round(10*g)/10,avgPromptsPerUser:Math.round(10*p)/10,mostUsedFeatures:[{name:"IdeaForge",usage:78},{name:"MVP Studio",usage:65},{name:"AI Tools Hub",usage:52},{name:"Docs & Decks",usage:41},{name:"TeamSpace",usage:33}]},demographics:{countries:[{country:"India",users:Math.floor(.35*r)},{country:"United States",users:Math.floor(.25*r)},{country:"United Kingdom",users:Math.floor(.15*r)},{country:"Canada",users:Math.floor(.1*r)},{country:"Others",users:Math.floor(.15*r)}],devices:[{device:"Desktop",percentage:68},{device:"Mobile",percentage:25},{device:"Tablet",percentage:7}]}};a((0,t.A)({totalUsers:r,newSignups:x},u))}catch(e){console.error("Error fetching user analytics:",e)}finally{y(!1)}};return e?w?(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("h1",{className:"text-3xl font-bold text-white",children:"User Analytics"}),(0,f.jsx)("div",{className:"animate-pulse h-8 w-32 bg-white/10 rounded"})]}),(0,f.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[...Array(8)].map((e,s)=>(0,f.jsx)(c.Zp,{className:"workspace-card animate-pulse",children:(0,f.jsx)(c.Wu,{className:"p-6",children:(0,f.jsx)("div",{className:"h-16 bg-white/10 rounded"})})},s))})]}):(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{className:"text-3xl font-bold text-white",children:"User Analytics"}),(0,f.jsx)("p",{className:"text-gray-400 mt-1",children:"Comprehensive user behavior and engagement metrics"})]}),(0,f.jsxs)(i.$,{onClick:b,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",children:[(0,f.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Refresh"]})]}),(0,f.jsxs)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,f.jsxs)(c.Zp,{className:"workspace-card",children:[(0,f.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,f.jsx)(c.ZB,{className:"text-sm font-medium text-gray-300",children:"Total Users"}),(0,f.jsx)(o.A,{className:"h-4 w-4 text-green-400"})]}),(0,f.jsxs)(c.Wu,{children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-white",children:s.totalUsers.toLocaleString()}),(0,f.jsxs)("p",{className:"text-xs text-green-400",children:["+",s.newSignups.thisMonth," this month"]})]})]}),(0,f.jsxs)(c.Zp,{className:"workspace-card",children:[(0,f.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,f.jsx)(c.ZB,{className:"text-sm font-medium text-gray-300",children:"Daily Active"}),(0,f.jsx)(h.A,{className:"h-4 w-4 text-green-400"})]}),(0,f.jsxs)(c.Wu,{children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-white",children:s.activeUsers.daily.toLocaleString()}),(0,f.jsxs)("p",{className:"text-xs text-gray-400",children:[(s.activeUsers.daily/s.totalUsers*100).toFixed(1),"% of total"]})]})]}),(0,f.jsxs)(c.Zp,{className:"workspace-card",children:[(0,f.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,f.jsx)(c.ZB,{className:"text-sm font-medium text-gray-300",children:"Weekly Active"}),(0,f.jsx)(m.A,{className:"h-4 w-4 text-green-400"})]}),(0,f.jsxs)(c.Wu,{children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-white",children:s.activeUsers.weekly.toLocaleString()}),(0,f.jsxs)("p",{className:"text-xs text-gray-400",children:[(s.activeUsers.weekly/s.totalUsers*100).toFixed(1),"% of total"]})]})]}),(0,f.jsxs)(c.Zp,{className:"workspace-card",children:[(0,f.jsxs)(c.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,f.jsx)(c.ZB,{className:"text-sm font-medium text-gray-300",children:"Monthly Active"}),(0,f.jsx)(j.A,{className:"h-4 w-4 text-green-400"})]}),(0,f.jsxs)(c.Wu,{children:[(0,f.jsx)("div",{className:"text-2xl font-bold text-white",children:s.activeUsers.monthly.toLocaleString()}),(0,f.jsxs)("p",{className:"text-xs text-gray-400",children:[(s.activeUsers.monthly/s.totalUsers*100).toFixed(1),"% of total"]})]})]})]}),(0,f.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,f.jsxs)(c.Zp,{className:"workspace-card",children:[(0,f.jsx)(c.aR,{children:(0,f.jsxs)(c.ZB,{className:"text-white flex items-center gap-2",children:[(0,f.jsx)(g.A,{className:"h-5 w-5 text-green-400"}),"Conversion Funnel"]})}),(0,f.jsxs)(c.Wu,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:"Idea \u2192 IdeaForge"}),(0,f.jsxs)("span",{className:"text-white",children:[s.conversionRates.ideaToForge,"%"]})]}),(0,f.jsx)(l.k,{value:s.conversionRates.ideaToForge,className:"h-2"})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:"IdeaForge \u2192 MVP Studio"}),(0,f.jsxs)("span",{className:"text-white",children:[s.conversionRates.forgeToMVP,"%"]})]}),(0,f.jsx)(l.k,{value:s.conversionRates.forgeToMVP,className:"h-2"})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:"Free \u2192 Trial"}),(0,f.jsxs)("span",{className:"text-white",children:[s.conversionRates.freeToTrial,"%"]})]}),(0,f.jsx)(l.k,{value:s.conversionRates.freeToTrial,className:"h-2"})]}),(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:"Trial \u2192 Paid"}),(0,f.jsxs)("span",{className:"text-white",children:[s.conversionRates.trialToPaid,"%"]})]}),(0,f.jsx)(l.k,{value:s.conversionRates.trialToPaid,className:"h-2"})]})]})]}),(0,f.jsxs)(c.Zp,{className:"workspace-card",children:[(0,f.jsx)(c.aR,{children:(0,f.jsxs)(c.ZB,{className:"text-white flex items-center gap-2",children:[(0,f.jsx)(p.A,{className:"h-5 w-5 text-green-400"}),"Usage Patterns"]})}),(0,f.jsxs)(c.Wu,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:"Avg Session Time"}),(0,f.jsxs)("span",{className:"text-white",children:[s.usagePatterns.avgSessionTime," min"]})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:"Avg Ideas per User"}),(0,f.jsx)("span",{className:"text-white",children:s.usagePatterns.avgIdeasPerUser})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:"Avg Prompts per User"}),(0,f.jsx)("span",{className:"text-white",children:s.usagePatterns.avgPromptsPerUser})]}),(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsx)("h4",{className:"text-sm font-medium text-gray-300",children:"Most Used Features"}),s.usagePatterns.mostUsedFeatures.slice(0,3).map((e,s)=>(0,f.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,f.jsx)("span",{className:"text-gray-400",children:e.name}),(0,f.jsxs)("span",{className:"text-white",children:[e.usage,"%"]})]},e.name))]})]})]})]}),(0,f.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,f.jsxs)(c.Zp,{className:"workspace-card",children:[(0,f.jsx)(c.aR,{children:(0,f.jsxs)(c.ZB,{className:"text-white flex items-center gap-2",children:[(0,f.jsx)(u.A,{className:"h-5 w-5 text-green-400"}),"Geographic Distribution"]})}),(0,f.jsx)(c.Wu,{children:(0,f.jsx)("div",{className:"space-y-3",children:s.demographics.countries.map((e,a)=>(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-gray-300",children:e.country}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("span",{className:"text-white",children:e.users}),(0,f.jsx)("div",{className:"w-16 bg-gray-700 rounded-full h-2",children:(0,f.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"".concat(e.users/s.totalUsers*100,"%")}})})]})]},e.country))})})]}),(0,f.jsxs)(c.Zp,{className:"workspace-card",children:[(0,f.jsx)(c.aR,{children:(0,f.jsxs)(c.ZB,{className:"text-white flex items-center gap-2",children:[(0,f.jsx)(N.A,{className:"h-5 w-5 text-green-400"}),"Device Usage"]})}),(0,f.jsx)(c.Wu,{children:(0,f.jsx)("div",{className:"space-y-4",children:s.demographics.devices.map((e,s)=>(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("span",{className:"text-gray-300 flex items-center gap-2",children:["Desktop"===e.device&&(0,f.jsx)(N.A,{className:"h-4 w-4"}),"Mobile"===e.device&&(0,f.jsx)(v.A,{className:"h-4 w-4"}),"Tablet"===e.device&&(0,f.jsx)(N.A,{className:"h-4 w-4"}),e.device]}),(0,f.jsxs)("span",{className:"text-white",children:[e.percentage,"%"]})]}),(0,f.jsx)(l.k,{value:e.percentage,className:"h-2"})]},e.device))})})]})]})]}):(0,f.jsxs)("div",{className:"text-center text-white",children:[(0,f.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),(0,f.jsx)("p",{children:"Only Super Admins can access user analytics."})]})}}}]);