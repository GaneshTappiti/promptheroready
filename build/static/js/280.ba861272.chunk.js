"use strict";(self.webpackChunkpromptheroready=self.webpackChunkpromptheroready||[]).push([[280],{60280:(e,s,t)=>{t.r(s),t.d(s,{default:()=>k});var a=t(89379),r=t(9950),c=t(16255),l=t(60348),i=t(38493),n=t(14697),d=t(41591),x=t(22869),o=t(32180),h=t(27549),m=t(21273),g=t(22796),p=t(81946),u=t(25692),j=t(53270),N=t(89318),f=t(66987),w=t(71742),y=t(15924),v=t(45833),b=t(44414);const k=()=>{const{adminUser:e,isSuperAdmin:s}=(0,o.z8)(),{toast:t}=(0,m.dj)(),[k,S]=(0,r.useState)([]),[A,C]=(0,r.useState)(!0),[_,D]=(0,r.useState)(!1),[E,P]=(0,r.useState)({});(0,r.useEffect)(()=>{s&&Z()},[s]);const Z=async()=>{try{C(!0);const{data:e,error:s}=await h.ND.from("platform_settings").select("*").order("category",{ascending:!0});if(s)throw s;S(e||[]);const t={};(e||[]).forEach(e=>{t[e.key]=e.value}),P(t)}catch(e){console.error("Error fetching settings:",e),t({title:"Error",description:"Failed to fetch platform settings",variant:"destructive"})}finally{C(!1)}},I=(e,s)=>{P(t=>(0,a.A)((0,a.A)({},t),{},{[e]:s}))},W=e=>{const s=E[e.key];switch(typeof e.value){case"boolean":return(0,b.jsx)(x.d,{checked:s,onCheckedChange:s=>I(e.key,s)});case"number":return(0,b.jsx)(n.p,{type:"number",value:s||"",onChange:s=>I(e.key,parseInt(s.target.value)||0),className:"bg-black/20 border-white/20 text-white"});default:return(0,b.jsx)(n.p,{value:s||"",onChange:s=>I(e.key,s.target.value),className:"bg-black/20 border-white/20 text-white"})}},F=k.reduce((e,s)=>(e[s.category]||(e[s.category]=[]),e[s.category].push(s),e),{}),O=e=>{switch(e.toLowerCase()){case"api":return(0,b.jsx)(g.A,{className:"h-5 w-5 text-green-400"});case"security":return(0,b.jsx)(p.A,{className:"h-5 w-5 text-green-400"});case"features":return(0,b.jsx)(u.A,{className:"h-5 w-5 text-green-400"});case"database":return(0,b.jsx)(j.A,{className:"h-5 w-5 text-green-400"});default:return(0,b.jsx)(N.A,{className:"h-5 w-5 text-green-400"})}};return s?A?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Platform Settings"}),(0,b.jsx)("div",{className:"animate-pulse h-8 w-32 bg-white/10 rounded"})]}),(0,b.jsx)("div",{className:"grid gap-6",children:[...Array(3)].map((e,s)=>(0,b.jsx)(c.Zp,{className:"workspace-card animate-pulse",children:(0,b.jsx)(c.Wu,{className:"p-6",children:(0,b.jsx)("div",{className:"h-24 bg-white/10 rounded"})})},s))})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Platform Settings"}),(0,b.jsx)("p",{className:"text-gray-400 mt-1",children:"Configure system-wide settings and feature toggles"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)(i.$,{onClick:Z,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",disabled:A,children:[(0,b.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,b.jsxs)(i.$,{onClick:async()=>{try{D(!0);const s=k.map(s=>({id:s.id,value:E[s.key],updated_by:null===e||void 0===e?void 0:e.id,updated_at:(new Date).toISOString()}));for(const e of s){const{error:s}=await h.ND.from("platform_settings").update({value:e.value,updated_by:e.updated_by,updated_at:e.updated_at}).eq("id",e.id);if(s)throw s}t({title:"Success",description:"Platform settings updated successfully"}),await Z()}catch(s){console.error("Error saving settings:",s),t({title:"Error",description:"Failed to save platform settings",variant:"destructive"})}finally{D(!1)}},className:"bg-green-600 hover:bg-green-700 text-white",disabled:_,children:[(0,b.jsx)(w.A,{className:"mr-2 h-4 w-4"}),_?"Saving...":"Save Changes"]})]})]}),(0,b.jsx)(c.Zp,{className:"workspace-card border-yellow-600/20",children:(0,b.jsx)(c.Wu,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(y.A,{className:"h-5 w-5 text-yellow-400"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-yellow-400 font-medium",children:"Important Notice"}),(0,b.jsx)("p",{className:"text-gray-300 text-sm",children:"Changes to platform settings affect all users. Please review carefully before saving."})]})]})})}),Object.entries(F).map(e=>{let[s,t]=e;return(0,b.jsxs)(c.Zp,{className:"workspace-card",children:[(0,b.jsx)(c.aR,{children:(0,b.jsxs)(c.ZB,{className:"text-white flex items-center gap-2",children:[O(s),s.charAt(0).toUpperCase()+s.slice(1)," Settings"]})}),(0,b.jsx)(c.Wu,{className:"space-y-6",children:t.map(e=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(d.J,{htmlFor:e.key,className:"text-gray-300 font-medium",children:e.key.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,b.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:e.description})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[e.is_public&&(0,b.jsx)(l.E,{variant:"outline",className:"text-xs border-white/20 text-gray-400",children:"Public"}),(0,b.jsx)("div",{className:"min-w-[200px]",children:W(e)})]})]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(e.updated_at).toLocaleString()]})]},e.key))})]},s)}),0===Object.keys(F).length&&(0,b.jsx)(c.Zp,{className:"workspace-card",children:(0,b.jsxs)(c.Wu,{className:"p-8 text-center",children:[(0,b.jsx)(N.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No settings configured"}),(0,b.jsx)("p",{className:"text-gray-400 mb-4",children:"Platform settings will appear here once they are configured in the database."}),(0,b.jsx)(i.$,{onClick:()=>{t({title:"Info",description:"Default settings would be created here"})},variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:"Initialize Default Settings"})]})}),(0,b.jsxs)(c.Zp,{className:"workspace-card",children:[(0,b.jsx)(c.aR,{children:(0,b.jsxs)(c.ZB,{className:"text-white flex items-center gap-2",children:[(0,b.jsx)(v.A,{className:"h-5 w-5 text-green-400"}),"System Status"]})}),(0,b.jsx)(c.Wu,{children:(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-400",children:"\u2713"}),(0,b.jsx)("p",{className:"text-sm text-gray-300",children:"Database"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-400",children:"\u2713"}),(0,b.jsx)("p",{className:"text-sm text-gray-300",children:"API Services"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-400",children:"\u2713"}),(0,b.jsx)("p",{className:"text-sm text-gray-300",children:"Authentication"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-2xl font-bold text-green-400",children:"\u2713"}),(0,b.jsx)("p",{className:"text-sm text-gray-300",children:"File Storage"})]})]})})]})]}):(0,b.jsxs)("div",{className:"text-center text-white",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),(0,b.jsx)("p",{children:"Only Super Admins can access platform settings."})]})}}}]);