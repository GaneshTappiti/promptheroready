/*! For license information please see 2797.e9b85d3b.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkpromptheroready=self.webpackChunkpromptheroready||[]).push([[2797],{33005:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(77784).A)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},56190:(e,t,s)=>{s.d(t,{d:()=>D});var a=s(89379),r=s(53986),c=s(65043),l=s(30858),i=s(82814),n=s(21862),d=s(13642),o=s(23168),h=s(93124),x=s(47920),m=s(70579);const u=["__scopeSwitch","name","checked","defaultChecked","required","disabled","value","onCheckedChange","form"],p=["__scopeSwitch"],g=["__scopeSwitch","control","checked","bubbles"];var f="Switch",[b,y]=(0,n.A)(f),[j,w]=b(f),v=c.forwardRef((e,t)=>{const{__scopeSwitch:s,name:n,checked:o,defaultChecked:h,required:p,disabled:g,value:b="on",onCheckedChange:y,form:w}=e,v=(0,r.A)(e,u),[N,k]=c.useState(null),C=(0,i.s)(t,e=>k(e)),_=c.useRef(!1),E=!N||(w||!!N.closest("form")),[P,D]=(0,d.i)({prop:o,defaultProp:null!==h&&void 0!==h&&h,onChange:y,caller:f});return(0,m.jsxs)(j,{scope:s,checked:P,disabled:g,children:[(0,m.jsx)(x.sG.button,(0,a.A)((0,a.A)({type:"button",role:"switch","aria-checked":P,"aria-required":p,"data-state":S(P),"data-disabled":g?"":void 0,disabled:g,value:b},v),{},{ref:C,onClick:(0,l.m)(e.onClick,e=>{D(e=>!e),E&&(_.current=e.isPropagationStopped(),_.current||e.stopPropagation())})})),E&&(0,m.jsx)(A,{control:N,bubbles:!_.current,name:n,value:b,checked:P,required:p,disabled:g,form:w,style:{transform:"translateX(-100%)"}})]})});v.displayName=f;var N="SwitchThumb",k=c.forwardRef((e,t)=>{const{__scopeSwitch:s}=e,c=(0,r.A)(e,p),l=w(N,s);return(0,m.jsx)(x.sG.span,(0,a.A)((0,a.A)({"data-state":S(l.checked),"data-disabled":l.disabled?"":void 0},c),{},{ref:t}))});k.displayName=N;var A=c.forwardRef((e,t)=>{let{__scopeSwitch:s,control:l,checked:n,bubbles:d=!0}=e,x=(0,r.A)(e,g);const u=c.useRef(null),p=(0,i.s)(u,t),f=(0,o.Z)(n),b=(0,h.X)(l);return c.useEffect(()=>{const e=u.current;if(!e)return;const t=window.HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(t,"checked").set;if(f!==n&&s){const t=new Event("click",{bubbles:d});s.call(e,n),e.dispatchEvent(t)}},[f,n,d]),(0,m.jsx)("input",(0,a.A)((0,a.A)({type:"checkbox","aria-hidden":!0,defaultChecked:n},x),{},{tabIndex:-1,ref:p,style:(0,a.A)((0,a.A)((0,a.A)({},x.style),b),{},{position:"absolute",pointerEvents:"none",opacity:0,margin:0})}))});function S(e){return e?"checked":"unchecked"}A.displayName="SwitchBubbleInput";var C=v,_=k,E=s(15074);const P=["className"],D=c.forwardRef((e,t)=>{let{className:s}=e,c=(0,r.A)(e,P);return(0,m.jsx)(C,(0,a.A)((0,a.A)({className:(0,E.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s)},c),{},{ref:t,children:(0,m.jsx)(_,{className:(0,E.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}))});D.displayName=C.displayName},77737:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(77784).A)("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},82054:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(77784).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},88693:(e,t,s)=>{s.d(t,{A:()=>a});const a=(0,s(77784).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},92797:(e,t,s)=>{s.r(t),s.d(t,{default:()=>k});var a=s(89379),r=s(65043),c=s(6742),l=s(8567),i=s(69772),n=s(49954),d=s(22822),o=s(56190),h=s(47631),x=s(41736),m=s(51704),u=s(77737),p=s(42489),g=s(20073),f=s(33005),b=s(7365),y=s(50516),j=s(88693),w=s(37719),v=s(82054),N=s(70579);const k=()=>{const{adminUser:e,isSuperAdmin:t}=(0,h.z8)(),{toast:s}=(0,m.dj)(),[k,A]=(0,r.useState)([]),[S,C]=(0,r.useState)(!0),[_,E]=(0,r.useState)(!1),[P,D]=(0,r.useState)({});(0,r.useEffect)(()=>{t&&I()},[t]);const I=async()=>{try{C(!0);const{data:e,error:t}=await x.ND.from("platform_settings").select("*").order("category",{ascending:!0});if(t)throw t;A(e||[]);const s={};(e||[]).forEach(e=>{s[e.key]=e.value}),D(s)}catch(e){console.error("Error fetching settings:",e),s({title:"Error",description:"Failed to fetch platform settings",variant:"destructive"})}finally{C(!1)}},R=(e,t)=>{D(s=>(0,a.A)((0,a.A)({},s),{},{[e]:t}))},Z=e=>{const t=P[e.key];switch(typeof e.value){case"boolean":return(0,N.jsx)(o.d,{checked:t,onCheckedChange:t=>R(e.key,t)});case"number":return(0,N.jsx)(n.p,{type:"number",value:t||"",onChange:t=>R(e.key,parseInt(t.target.value)||0),className:"bg-black/20 border-white/20 text-white"});default:return(0,N.jsx)(n.p,{value:t||"",onChange:t=>R(e.key,t.target.value),className:"bg-black/20 border-white/20 text-white"})}},M=k.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{}),q=e=>{switch(e.toLowerCase()){case"api":return(0,N.jsx)(u.A,{className:"h-5 w-5 text-green-400"});case"security":return(0,N.jsx)(p.A,{className:"h-5 w-5 text-green-400"});case"features":return(0,N.jsx)(g.A,{className:"h-5 w-5 text-green-400"});case"database":return(0,N.jsx)(f.A,{className:"h-5 w-5 text-green-400"});default:return(0,N.jsx)(b.A,{className:"h-5 w-5 text-green-400"})}};return t?S?(0,N.jsxs)("div",{className:"space-y-6",children:[(0,N.jsxs)("div",{className:"flex items-center justify-between",children:[(0,N.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Platform Settings"}),(0,N.jsx)("div",{className:"animate-pulse h-8 w-32 bg-white/10 rounded"})]}),(0,N.jsx)("div",{className:"grid gap-6",children:[...Array(3)].map((e,t)=>(0,N.jsx)(c.Zp,{className:"workspace-card animate-pulse",children:(0,N.jsx)(c.Wu,{className:"p-6",children:(0,N.jsx)("div",{className:"h-24 bg-white/10 rounded"})})},t))})]}):(0,N.jsxs)("div",{className:"space-y-6",children:[(0,N.jsxs)("div",{className:"flex items-center justify-between",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Platform Settings"}),(0,N.jsx)("p",{className:"text-gray-400 mt-1",children:"Configure system-wide settings and feature toggles"})]}),(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[(0,N.jsxs)(i.$,{onClick:I,variant:"outline",size:"sm",className:"border-white/20 text-white hover:bg-white/10",disabled:S,children:[(0,N.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,N.jsxs)(i.$,{onClick:async()=>{try{E(!0);const t=k.map(t=>({id:t.id,value:P[t.key],updated_by:null===e||void 0===e?void 0:e.id,updated_at:(new Date).toISOString()}));for(const e of t){const{error:t}=await x.ND.from("platform_settings").update({value:e.value,updated_by:e.updated_by,updated_at:e.updated_at}).eq("id",e.id);if(t)throw t}s({title:"Success",description:"Platform settings updated successfully"}),await I()}catch(t){console.error("Error saving settings:",t),s({title:"Error",description:"Failed to save platform settings",variant:"destructive"})}finally{E(!1)}},className:"bg-green-600 hover:bg-green-700 text-white",disabled:_,children:[(0,N.jsx)(j.A,{className:"mr-2 h-4 w-4"}),_?"Saving...":"Save Changes"]})]})]}),(0,N.jsx)(c.Zp,{className:"workspace-card border-yellow-600/20",children:(0,N.jsx)(c.Wu,{className:"p-4",children:(0,N.jsxs)("div",{className:"flex items-center gap-3",children:[(0,N.jsx)(w.A,{className:"h-5 w-5 text-yellow-400"}),(0,N.jsxs)("div",{children:[(0,N.jsx)("h3",{className:"text-yellow-400 font-medium",children:"Important Notice"}),(0,N.jsx)("p",{className:"text-gray-300 text-sm",children:"Changes to platform settings affect all users. Please review carefully before saving."})]})]})})}),Object.entries(M).map(e=>{let[t,s]=e;return(0,N.jsxs)(c.Zp,{className:"workspace-card",children:[(0,N.jsx)(c.aR,{children:(0,N.jsxs)(c.ZB,{className:"text-white flex items-center gap-2",children:[q(t),t.charAt(0).toUpperCase()+t.slice(1)," Settings"]})}),(0,N.jsx)(c.Wu,{className:"space-y-6",children:s.map(e=>(0,N.jsxs)("div",{className:"space-y-2",children:[(0,N.jsxs)("div",{className:"flex items-center justify-between",children:[(0,N.jsxs)("div",{className:"flex-1",children:[(0,N.jsx)(d.J,{htmlFor:e.key,className:"text-gray-300 font-medium",children:e.key.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),(0,N.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:e.description})]}),(0,N.jsxs)("div",{className:"flex items-center gap-2",children:[e.is_public&&(0,N.jsx)(l.E,{variant:"outline",className:"text-xs border-white/20 text-gray-400",children:"Public"}),(0,N.jsx)("div",{className:"min-w-[200px]",children:Z(e)})]})]}),(0,N.jsxs)("div",{className:"text-xs text-gray-500",children:["Last updated: ",new Date(e.updated_at).toLocaleString()]})]},e.key))})]},t)}),0===Object.keys(M).length&&(0,N.jsx)(c.Zp,{className:"workspace-card",children:(0,N.jsxs)(c.Wu,{className:"p-8 text-center",children:[(0,N.jsx)(b.A,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,N.jsx)("h3",{className:"text-lg font-medium text-white mb-2",children:"No settings configured"}),(0,N.jsx)("p",{className:"text-gray-400 mb-4",children:"Platform settings will appear here once they are configured in the database."}),(0,N.jsx)(i.$,{onClick:()=>{s({title:"Info",description:"Default settings would be created here"})},variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:"Initialize Default Settings"})]})}),(0,N.jsxs)(c.Zp,{className:"workspace-card",children:[(0,N.jsx)(c.aR,{children:(0,N.jsxs)(c.ZB,{className:"text-white flex items-center gap-2",children:[(0,N.jsx)(v.A,{className:"h-5 w-5 text-green-400"}),"System Status"]})}),(0,N.jsx)(c.Wu,{children:(0,N.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsx)("div",{className:"text-2xl font-bold text-green-400",children:"\u2713"}),(0,N.jsx)("p",{className:"text-sm text-gray-300",children:"Database"})]}),(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsx)("div",{className:"text-2xl font-bold text-green-400",children:"\u2713"}),(0,N.jsx)("p",{className:"text-sm text-gray-300",children:"API Services"})]}),(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsx)("div",{className:"text-2xl font-bold text-green-400",children:"\u2713"}),(0,N.jsx)("p",{className:"text-sm text-gray-300",children:"Authentication"})]}),(0,N.jsxs)("div",{className:"text-center",children:[(0,N.jsx)("div",{className:"text-2xl font-bold text-green-400",children:"\u2713"}),(0,N.jsx)("p",{className:"text-sm text-gray-300",children:"File Storage"})]})]})})]})]}):(0,N.jsxs)("div",{className:"text-center text-white",children:[(0,N.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),(0,N.jsx)("p",{children:"Only Super Admins can access platform settings."})]})}}}]);
//# sourceMappingURL=2797.e9b85d3b.chunk.js.map