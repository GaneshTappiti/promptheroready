"use strict";(self.webpackChunkpromptheroready=self.webpackChunkpromptheroready||[]).push([[6595],{56595:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var r=s(9950),a=s(16255),n=s(38493),i=s(60348),c=s(94208),o=s(73281),l=s(91367),m=s(21273),d=s(27549);class h{static async getCachedQuery(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.DEFAULT_TTL;const r=performance.now(),a=this.getFromCache(e);if(a)return this.recordMetrics(e,performance.now()-r,!0),a;const n=await t();return this.setCache(e,n,s),this.recordMetrics(e,performance.now()-r,!1),n}static async getCachedSchemaQuery(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e5;return this.getCachedQuery(e,t,s)}static async getTimezones(){return this.getCachedQuery("pg_timezone_names",async()=>{const{data:e,error:t}=await d.ND.rpc("get_timezone_names");return t?(console.error("Error fetching timezones:",t),["UTC","America/New_York","America/Los_Angeles","Europe/London","Europe/Paris","Asia/Tokyo","Asia/Shanghai","Asia/Kolkata","Australia/Sydney"]):e||[]},this.TIMEZONE_CACHE_TTL)}static createOptimizedRealtimeSubscription(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{filter:r,rateLimit:a=10,batchSize:n=5,batchDelay:i=100}=s,c=[];let o=0,l=null;const m=()=>{if(0===c.length)return;const e=Date.now(),s=e-o,r=1e3/a;if(s<r)return void setTimeout(m,r-s);c.splice(0,n).forEach(t),o=e,c.length>0&&setTimeout(m,r)},h=d.ND.channel("optimized_".concat(e)).on("postgres_changes",{event:"*",schema:"public",table:e,filter:r},e=>{c.push(e),l&&clearTimeout(l),l=setTimeout(()=>{m(),l=null},i)}).subscribe();return{subscription:h,unsubscribe:()=>{l&&clearTimeout(l),h.unsubscribe()}}}static async batchQueries(e){const t=await Promise.allSettled(Object.entries(e).map(async e=>{let[t,s]=e;try{return{key:t,result:await s(),success:!0}}catch(r){return console.error("Error in batch query ".concat(t,":"),r),{key:t,error:r,success:!1}}})),s={};return t.forEach(e=>{"fulfilled"===e.status&&e.value.success?s[e.value.key]=e.value.result:"fulfilled"===e.status?s[e.value.key]=null:console.error("Promise rejected in batch query:",e.reason)}),s}static async getPaginatedData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{pageSize:s=20,cursor:r,orderBy:a="created_at",ascending:n=!1,filters:i={}}=t;let c=d.ND.from(e).select("*").order(a,{ascending:n}).limit(s+1);if(Object.entries(i).forEach(e=>{let[t,s]=e;void 0!==s&&null!==s&&(c=c.eq(t,s))}),r){c=c[n?"gt":"lt"](a,r)}const{data:o,error:l}=await c;if(l)throw new Error("Pagination query failed: ".concat(l.message));const m=o.length>s,h=m?o.slice(0,s):o;return{data:h,nextCursor:m?h[h.length-1][a]:void 0,hasMore:m}}static async optimizeConnectionPool(){try{const{error:e}=await d.ND.rpc("set_connection_pool_settings",{max_connections:20,idle_timeout:3e4,connection_timeout:5e3});e&&console.warn("Could not optimize connection pool:",e)}catch(e){console.warn("Connection pool optimization not available:",e)}}static getFromCache(e){const t=this.cache.get(e);if(!t)return null;return Date.now()>t.timestamp+t.ttl?(this.cache.delete(e),null):t.data}static setCache(e,t,s){if(this.cache.size>=this.MAX_CACHE_SIZE){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,{data:t,timestamp:Date.now(),ttl:s})}static clearCache(e){if(e){const t=new RegExp(e);for(const e of this.cache.keys())t.test(e)&&this.cache.delete(e)}else this.cache.clear()}static recordMetrics(e,t,s){this.performanceMetrics.length>=this.MAX_METRICS_SIZE&&this.performanceMetrics.shift(),this.performanceMetrics.push({queryId:e,executionTime:t,cacheHit:s,timestamp:Date.now()})}static getPerformanceStats(){const e=this.performanceMetrics,t=e.length,s=e.filter(e=>e.cacheHit).length,r=t>0?s/t*100:0,a=e.reduce((e,t)=>e+t.executionTime,0);return{totalQueries:t,cacheHitRate:r,averageExecutionTime:t>0?a/t:0,slowestQueries:e.filter(e=>!e.cacheHit).sort((e,t)=>t.executionTime-e.executionTime).slice(0,10)}}static async preloadCommonData(){try{await this.getTimezones(),await Promise.all([this.getCachedQuery("user_preferences",async()=>{const{data:e}=await d.ND.from("user_preferences").select("*").limit(100);return e||[]}),this.getCachedQuery("app_settings",async()=>{const{data:e}=await d.ND.from("app_settings").select("*");return e||[]})]),console.log("Common data preloaded successfully")}catch(e){console.warn("Error preloading common data:",e)}}static async initialize(){if("undefined"!==typeof window)try{await this.optimizeConnectionPool(),await this.preloadCommonData(),setInterval(()=>{this.cleanupExpiredCache()},3e5),console.log("Query optimization service initialized")}catch(e){console.error("Error initializing query optimization service:",e)}else console.log("Skipping QueryOptimizationService initialization on server side")}static cleanupExpiredCache(){const e=Date.now();for(const[t,s]of this.cache.entries())e>s.timestamp+s.ttl&&this.cache.delete(t)}}h.cache=new Map,h.performanceMetrics=[],h.DEFAULT_TTL=3e5,h.TIMEZONE_CACHE_TTL=864e5,h.MAX_CACHE_SIZE=1e3,h.MAX_METRICS_SIZE=1e4;class u{constructor(e){this.userId=void 0,this.testResults=[],this.userId=e}async testLargeDatasetLoading(){const e="Large Dataset Loading",t=performance.now(),s=this.getMemoryUsage();try{const{data:r,error:a}=await d.ND.from("ideas").select("*").limit(1e3);if(a)throw a;const{data:n,error:i}=await d.ND.from("messages").select("*").limit(1e3);if(i)throw i;const{data:c,error:o}=await d.ND.from("tasks").select("*").limit(500);if(o)throw o;const l=performance.now()-t,m=this.getMemoryUsage(),h=((null===r||void 0===r?void 0:r.length)||0)+((null===n||void 0===n?void 0:n.length)||0)+((null===c||void 0===c?void 0:c.length)||0);return{testName:e,success:!0,duration:l,memoryUsage:{before:s,after:m,delta:m-s},metrics:{recordsProcessed:h,throughput:h/(l/1e3)},recommendations:this.generateRecommendations(l,h)}}catch(r){return{testName:e,success:!1,duration:performance.now()-t,metrics:{},error:r instanceof Error?r.message:"Unknown error"}}}async testPaginationPerformance(){const e="Pagination Performance",t=performance.now(),s=this.getMemoryUsage();try{let r,a=0,n=0;const i=50;do{const e=await h.getPaginatedData("messages",{pageSize:i,cursor:r,orderBy:"created_at",ascending:!1});if(a+=e.data.length,n++,r=e.nextCursor,n>=10)break}while(r);const c=performance.now()-t,o=this.getMemoryUsage();return{testName:e,success:!0,duration:c,memoryUsage:{before:s,after:o,delta:o-s},metrics:{recordsProcessed:a,throughput:a/(c/1e3)},recommendations:[c>5e3?"Consider reducing page size or implementing virtual scrolling":"Pagination performance is acceptable",a<100?"Consider increasing page size for better efficiency":"Page size is appropriate"]}}catch(r){return{testName:e,success:!1,duration:performance.now()-t,metrics:{},error:r instanceof Error?r.message:"Unknown error"}}}async testCachingPerformance(){const e="Caching Performance",t=performance.now();try{const s="performance_test_cache";let r=0,a=0;for(let e=0;e<10;e++){await h.getCachedQuery("".concat(s,"_").concat(e%3),async()=>{const{data:e}=await d.ND.from("ideas").select("*").limit(10);return e||[]},3e4);a++,e>2&&e%3<2&&r++}const n=performance.now()-t,i=r/a*100;return{testName:e,success:!0,duration:n,metrics:{recordsProcessed:a,cacheHitRate:i,throughput:a/(n/1e3)},recommendations:[i>50?"Cache is performing well":"Consider optimizing cache strategy",n>3e3?"Cache lookup time could be improved":"Cache performance is good"]}}catch(s){return{testName:e,success:!1,duration:performance.now()-t,metrics:{},error:s instanceof Error?s.message:"Unknown error"}}}async testConcurrentOperations(){const e="Concurrent Operations",t=performance.now(),s=this.getMemoryUsage();try{const r=[()=>d.ND.from("ideas").select("*").limit(100),()=>d.ND.from("messages").select("*").limit(100),()=>d.ND.from("tasks").select("*").limit(50),()=>d.ND.from("user_profiles").select("*").limit(50),()=>d.ND.from("teams").select("*").limit(25)],a=await Promise.all(r.map(e=>e())),n=performance.now()-t,i=this.getMemoryUsage(),c=a.reduce((e,t)=>{var s;return e+((null===(s=t.data)||void 0===s?void 0:s.length)||0)},0),o=a.filter(e=>e.error).length;return{testName:e,success:0===o,duration:n,memoryUsage:{before:s,after:i,delta:i-s},metrics:{recordsProcessed:c,throughput:c/(n/1e3),errorRate:o/r.length*100},recommendations:[o>0?"Some concurrent operations failed - check connection limits":"Concurrent operations successful",n>5e3?"Consider implementing request queuing":"Concurrent performance is acceptable"]}}catch(r){return{testName:e,success:!1,duration:performance.now()-t,metrics:{},error:r instanceof Error?r.message:"Unknown error"}}}async testRealtimePerformance(){const e="Real-time Subscription Performance",t=performance.now();try{let s=0;const r=[];for(let e=0;e<5;e++){const t=d.ND.channel("perf_test_".concat(e)).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},()=>{s++}).subscribe();r.push(t)}await new Promise(e=>setTimeout(e,1e3));for(let e=0;e<10;e++)await d.ND.from("messages").insert([{text:"Performance test message ".concat(e),username:"perf_test_".concat(this.userId),country:"Test",is_authenticated:!0}]);await new Promise(e=>setTimeout(e,2e3)),r.forEach(e=>{d.ND.removeChannel(e)});const a=performance.now()-t;return{testName:e,success:s>0,duration:a,metrics:{recordsProcessed:s,throughput:s/(a/1e3)},recommendations:[s<10?"Some real-time messages may have been missed":"Real-time performance is good",a>1e4?"Real-time latency is high":"Real-time latency is acceptable"]}}catch(s){return{testName:e,success:!1,duration:performance.now()-t,metrics:{},error:s instanceof Error?s.message:"Unknown error"}}}async testMemoryUsage(){const e="Memory Usage Analysis",t=performance.now(),s=this.getMemoryUsage();try{window.gc&&window.gc();const r=this.getMemoryUsage(),a=[];for(let e=0;e<100;e++){const{data:e}=await d.ND.from("messages").select("*").limit(50);a.push(e)}const n=this.getMemoryUsage();a.length=0,window.gc&&window.gc(),await new Promise(e=>setTimeout(e,1e3));const i=this.getMemoryUsage();return{testName:e,success:!0,duration:performance.now()-t,memoryUsage:{before:s,after:i,delta:i-s},metrics:{recordsProcessed:5e3},recommendations:[i-r>50?"Potential memory leak detected":"Memory usage is stable",n-r>200?"High memory usage during operations":"Memory usage is reasonable"]}}catch(r){return{testName:e,success:!1,duration:performance.now()-t,metrics:{},error:r instanceof Error?r.message:"Unknown error"}}}async runAllTests(){console.log("\ud83d\ude80 Starting Performance Tests...");const e=[()=>this.testLargeDatasetLoading(),()=>this.testPaginationPerformance(),()=>this.testCachingPerformance(),()=>this.testConcurrentOperations(),()=>this.testRealtimePerformance(),()=>this.testMemoryUsage()];this.testResults=[];for(const r of e)try{const e=await r();this.testResults.push(e),console.log("\u2705 ".concat(e.testName,": ").concat(e.success?"PASS":"FAIL"," (").concat(Math.round(e.duration),"ms)"))}catch(s){console.error("\u274c Test failed:",s)}const t=this.generateSummary();return console.log("\ud83c\udfaf Performance Tests Complete:",t),{results:this.testResults,summary:t}}getMemoryUsage(){return"memory"in performance?performance.memory.usedJSHeapSize/1024/1024:0}generateRecommendations(e,t){const s=[];return e>5e3&&s.push("Consider implementing pagination or virtual scrolling"),t>1e3&&s.push("Large dataset detected - consider data virtualization"),e/t>5&&s.push("Query optimization needed - consider indexing"),s}generateSummary(){const e=this.testResults.length,t=this.testResults.filter(e=>e.success).length,s=e-t,r=this.testResults.reduce((e,t)=>e+t.duration,0)/e,a=this.testResults.filter(e=>e.memoryUsage).reduce((e,t)=>{var s;return e+((null===(s=t.memoryUsage)||void 0===s?void 0:s.delta)||0)},0),n=(t/e*100+Math.max(0,100-r/100)+Math.max(0,100-2*a))/3;return{totalTests:e,passedTests:t,failedTests:s,averageDuration:Math.round(r),totalMemoryDelta:Math.round(100*a)/100,overallScore:Math.round(n)}}}"undefined"!==typeof window&&(window.performanceTest={PerformanceTester:u,runTests:async e=>{const t=new u(e);return await t.runAllTests()}});var g=s(33360),x=s(52431),p=s(93249),f=s(77737),y=s(25692),j=s(66987),N=s(45833),w=s(81850),v=s(6890),b=s(18134),T=s(44414);const C=()=>{const{user:e}=(0,l.A)(),{toast:t}=(0,m.dj)(),[s,d]=(0,r.useState)([]),[C,S]=(0,r.useState)(!1),[M,P]=(0,r.useState)(0),[z,E]=(0,r.useState)(""),[A,_]=(0,r.useState)(null),[k,R]=(0,r.useState)(null),[D,U]=(0,r.useState)(null);(0,r.useEffect)(()=>{L(),I()},[]);const L=()=>{const e=h.getPerformanceStats();R(e)},I=()=>{const e={memory:O(),connection:Q(),cache:Z(),timing:q()};U(e)},O=()=>{if("memory"in performance){const e=performance.memory;return{used:Math.round(e.usedJSHeapSize/1024/1024),total:Math.round(e.totalJSHeapSize/1024/1024),limit:Math.round(e.jsHeapSizeLimit/1024/1024)}}return{used:0,total:0,limit:0}},Q=()=>{var e,t,s;return{type:(null===(e=navigator.connection)||void 0===e?void 0:e.effectiveType)||"unknown",downlink:(null===(t=navigator.connection)||void 0===t?void 0:t.downlink)||0,rtt:(null===(s=navigator.connection)||void 0===s?void 0:s.rtt)||0}},Z=()=>{try{return{size:Object.keys(sessionStorage).length+Object.keys(localStorage).length,sessionStorage:Object.keys(sessionStorage).length,localStorage:Object.keys(localStorage).length}}catch(e){return{size:0,sessionStorage:0,localStorage:0}}},q=()=>{const e=performance.getEntriesByType("navigation")[0];return e?{domContentLoaded:Math.round(e.domContentLoadedEventEnd-e.fetchStart),loadComplete:Math.round(e.loadEventEnd-e.fetchStart),firstPaint:Math.round(e.responseStart-e.fetchStart)}:{domContentLoaded:0,loadComplete:0,firstPaint:0}};return(0,T.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 p-6",children:(0,T.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsxs)("h1",{className:"text-3xl font-bold text-white mb-2 flex items-center justify-center gap-2",children:[(0,T.jsx)(g.A,{className:"h-8 w-8 text-blue-400"}),"Performance Testing & Optimization"]}),(0,T.jsx)("p",{className:"text-gray-400",children:"Test application performance with larger datasets and identify bottlenecks"})]}),D&&(0,T.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,T.jsx)(a.Zp,{className:"bg-gray-800/50 border-gray-700",children:(0,T.jsx)(a.Wu,{className:"p-4",children:(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[(0,T.jsx)(x.A,{className:"h-5 w-5 text-blue-400"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"text-sm text-gray-400",children:"Memory Usage"}),(0,T.jsxs)("p",{className:"text-lg font-bold text-white",children:[D.memory.used,"MB / ",D.memory.total,"MB"]})]})]})})}),(0,T.jsx)(a.Zp,{className:"bg-gray-800/50 border-gray-700",children:(0,T.jsx)(a.Wu,{className:"p-4",children:(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[(0,T.jsx)(p.A,{className:"h-5 w-5 text-green-400"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"text-sm text-gray-400",children:"Connection"}),(0,T.jsxs)("p",{className:"text-lg font-bold text-white",children:[D.connection.type," (",D.connection.downlink,"Mbps)"]})]})]})})}),(0,T.jsx)(a.Zp,{className:"bg-gray-800/50 border-gray-700",children:(0,T.jsx)(a.Wu,{className:"p-4",children:(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[(0,T.jsx)(x.A,{className:"h-5 w-5 text-purple-400"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"text-sm text-gray-400",children:"Cache Size"}),(0,T.jsxs)("p",{className:"text-lg font-bold text-white",children:[D.cache.size," items"]})]})]})})}),(0,T.jsx)(a.Zp,{className:"bg-gray-800/50 border-gray-700",children:(0,T.jsx)(a.Wu,{className:"p-4",children:(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[(0,T.jsx)(f.A,{className:"h-5 w-5 text-yellow-400"}),(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"text-sm text-gray-400",children:"Load Time"}),(0,T.jsxs)("p",{className:"text-lg font-bold text-white",children:[D.timing.loadComplete,"ms"]})]})]})})})]}),(0,T.jsxs)(a.Zp,{className:"bg-gray-800/50 border-gray-700",children:[(0,T.jsx)(a.aR,{children:(0,T.jsxs)(a.ZB,{className:"text-white flex items-center gap-2",children:[(0,T.jsx)(y.A,{className:"h-5 w-5"}),"Performance Test Suite"]})}),(0,T.jsxs)(a.Wu,{className:"space-y-4",children:[(0,T.jsxs)("div",{className:"flex items-center gap-4",children:[(0,T.jsxs)(n.$,{onClick:async()=>{if(e){S(!0),P(0),d([]),_(null);try{const s=new u(e.id),r=["Initializing performance testing...","Testing large dataset loading...","Testing pagination performance...","Testing caching efficiency...","Testing concurrent operations...","Testing real-time performance...","Testing memory usage patterns...","Generating performance report..."];for(let e=0;e<r.length;e++)E(r[e]),P(e/r.length*100),await new Promise(e=>setTimeout(e,500));const{results:a,summary:n}=await s.runAllTests();d(a),_(n),P(100),E("Performance tests completed!"),L(),I(),t({title:"Performance Tests Complete",description:"".concat(n.passedTests,"/").concat(n.totalTests," tests passed (Score: ").concat(n.overallScore,"/100)"),variant:n.overallScore>70?"default":"destructive"})}catch(s){console.error("Performance test execution failed:",s),t({title:"Test Execution Failed",description:s instanceof Error?s.message:"Unknown error occurred",variant:"destructive"})}finally{S(!1)}}else t({title:"Authentication Required",description:"Please log in to run performance tests",variant:"destructive"})},disabled:C||!e,className:"flex items-center gap-2",children:[C?(0,T.jsx)(j.A,{className:"h-4 w-4 animate-spin"}):(0,T.jsx)(g.A,{className:"h-4 w-4"}),C?"Running Tests...":"Run Performance Tests"]}),(0,T.jsxs)(n.$,{variant:"outline",onClick:()=>{L(),I()},children:[(0,T.jsx)(j.A,{className:"h-4 w-4 mr-2"}),"Refresh Metrics"]}),!e&&(0,T.jsx)(i.E,{variant:"destructive",children:"Login Required"})]}),C&&(0,T.jsxs)("div",{className:"space-y-2",children:[(0,T.jsxs)("div",{className:"flex items-center justify-between",children:[(0,T.jsx)("span",{className:"text-sm text-gray-400",children:z}),(0,T.jsxs)("span",{className:"text-sm text-gray-400",children:[Math.round(M),"%"]})]}),(0,T.jsx)(c.k,{value:M,className:"w-full"})]}),A&&(0,T.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 p-4 bg-gray-700/30 rounded-lg",children:[(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsx)("p",{className:"text-2xl font-bold text-blue-400",children:A.totalTests}),(0,T.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Tests"})]}),(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsx)("p",{className:"text-2xl font-bold text-green-400",children:A.passedTests}),(0,T.jsx)("p",{className:"text-gray-400 text-sm",children:"Passed"})]}),(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsx)("p",{className:"text-2xl font-bold text-red-400",children:A.failedTests}),(0,T.jsx)("p",{className:"text-gray-400 text-sm",children:"Failed"})]}),(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsxs)("p",{className:"text-2xl font-bold text-yellow-400",children:[A.averageDuration,"ms"]}),(0,T.jsx)("p",{className:"text-gray-400 text-sm",children:"Avg Duration"})]}),(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsxs)("p",{className:"text-2xl font-bold ".concat((H=A.overallScore,H>=80?"text-green-400":H>=60?"text-yellow-400":"text-red-400")),children:[A.overallScore,"/100"]}),(0,T.jsx)("p",{className:"text-gray-400 text-sm",children:"Performance Score"})]})]})]})]}),(0,T.jsxs)(o.tU,{defaultValue:"results",className:"space-y-4",children:[(0,T.jsxs)(o.j7,{className:"grid w-full grid-cols-3",children:[(0,T.jsx)(o.Xi,{value:"results",children:"Test Results"}),(0,T.jsx)(o.Xi,{value:"metrics",children:"Performance Metrics"}),(0,T.jsx)(o.Xi,{value:"optimization",children:"Optimization Tips"})]}),(0,T.jsx)(o.av,{value:"results",className:"space-y-4",children:s.length>0&&(0,T.jsxs)(a.Zp,{className:"bg-gray-800/50 border-gray-700",children:[(0,T.jsx)(a.aR,{children:(0,T.jsx)(a.ZB,{className:"text-white",children:"Detailed Test Results"})}),(0,T.jsx)(a.Wu,{children:(0,T.jsx)("div",{className:"space-y-4",children:s.map((e,t)=>(0,T.jsxs)("div",{className:"p-4 bg-gray-700/30 rounded-lg",children:[(0,T.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,T.jsxs)("div",{className:"flex items-center gap-2",children:[e.success?(0,T.jsx)(N.A,{className:"h-5 w-5 text-green-400"}):(0,T.jsx)(w.A,{className:"h-5 w-5 text-red-400"}),(0,T.jsx)("h3",{className:"text-white font-semibold",children:e.testName})]}),(0,T.jsx)(i.E,{variant:e.success?"default":"destructive",children:e.success?"PASS":"FAIL"})]}),(0,T.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"text-gray-400",children:"Duration"}),(0,T.jsxs)("p",{className:"text-white",children:[Math.round(e.duration),"ms"]})]}),e.metrics.recordsProcessed&&(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"text-gray-400",children:"Records"}),(0,T.jsx)("p",{className:"text-white",children:e.metrics.recordsProcessed})]}),e.metrics.throughput&&(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"text-gray-400",children:"Throughput"}),(0,T.jsxs)("p",{className:"text-white",children:[Math.round(e.metrics.throughput),"/sec"]})]}),e.memoryUsage&&(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{className:"text-gray-400",children:"Memory \u0394"}),(0,T.jsxs)("p",{className:"text-white",children:[e.memoryUsage.delta.toFixed(1),"MB"]})]})]}),e.recommendations&&e.recommendations.length>0&&(0,T.jsxs)("div",{className:"mt-3",children:[(0,T.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Recommendations:"}),(0,T.jsx)("ul",{className:"text-sm text-gray-300 space-y-1",children:e.recommendations.map((e,t)=>(0,T.jsxs)("li",{className:"flex items-start gap-2",children:[(0,T.jsx)(v.A,{className:"h-3 w-3 mt-1 text-blue-400 flex-shrink-0"}),e]},t))})]}),e.error&&(0,T.jsx)("div",{className:"mt-3 p-2 bg-red-900/20 border border-red-500/30 rounded",children:(0,T.jsx)("p",{className:"text-red-400 text-sm",children:e.error})})]},t))})})]})}),(0,T.jsx)(o.av,{value:"metrics",className:"space-y-4",children:k&&(0,T.jsxs)(a.Zp,{className:"bg-gray-800/50 border-gray-700",children:[(0,T.jsx)(a.aR,{children:(0,T.jsxs)(a.ZB,{className:"text-white flex items-center gap-2",children:[(0,T.jsx)(b.A,{className:"h-5 w-5"}),"Query Performance Statistics"]})}),(0,T.jsxs)(a.Wu,{children:[(0,T.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:k.totalQueries}),(0,T.jsx)("p",{className:"text-gray-400",children:"Total Queries"})]}),(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsxs)("p",{className:"text-3xl font-bold text-green-400",children:[k.cacheHitRate.toFixed(1),"%"]}),(0,T.jsx)("p",{className:"text-gray-400",children:"Cache Hit Rate"})]}),(0,T.jsxs)("div",{className:"text-center",children:[(0,T.jsxs)("p",{className:"text-3xl font-bold text-yellow-400",children:[Math.round(k.averageExecutionTime),"ms"]}),(0,T.jsx)("p",{className:"text-gray-400",children:"Avg Execution Time"})]})]}),k.slowestQueries.length>0&&(0,T.jsxs)("div",{className:"mt-6",children:[(0,T.jsx)("h4",{className:"text-white font-semibold mb-3",children:"Slowest Queries"}),(0,T.jsx)("div",{className:"space-y-2",children:k.slowestQueries.slice(0,5).map((e,t)=>(0,T.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-700/30 rounded",children:[(0,T.jsx)("span",{className:"text-gray-300 font-mono text-sm",children:e.queryId}),(0,T.jsxs)("span",{className:"text-yellow-400",children:[Math.round(e.executionTime),"ms"]})]},t))})]})]})]})}),(0,T.jsx)(o.av,{value:"optimization",className:"space-y-4",children:(0,T.jsxs)(a.Zp,{className:"bg-gray-800/50 border-gray-700",children:[(0,T.jsx)(a.aR,{children:(0,T.jsxs)(a.ZB,{className:"text-white flex items-center gap-2",children:[(0,T.jsx)(v.A,{className:"h-5 w-5"}),"Performance Optimization Recommendations"]})}),(0,T.jsx)(a.Wu,{children:(0,T.jsxs)("div",{className:"space-y-4",children:[(0,T.jsxs)("div",{className:"p-4 bg-blue-900/20 border border-blue-500/30 rounded-lg",children:[(0,T.jsx)("h4",{className:"text-blue-400 font-semibold mb-2",children:"Database Optimization"}),(0,T.jsxs)("ul",{className:"text-gray-300 space-y-1 text-sm",children:[(0,T.jsx)("li",{children:"\u2022 Implement cursor-based pagination for large datasets"}),(0,T.jsx)("li",{children:"\u2022 Use database indexes on frequently queried columns"}),(0,T.jsx)("li",{children:"\u2022 Consider query result caching for static data"}),(0,T.jsx)("li",{children:"\u2022 Optimize JOIN operations and reduce N+1 queries"})]})]}),(0,T.jsxs)("div",{className:"p-4 bg-green-900/20 border border-green-500/30 rounded-lg",children:[(0,T.jsx)("h4",{className:"text-green-400 font-semibold mb-2",children:"Frontend Optimization"}),(0,T.jsxs)("ul",{className:"text-gray-300 space-y-1 text-sm",children:[(0,T.jsx)("li",{children:"\u2022 Implement virtual scrolling for large lists"}),(0,T.jsx)("li",{children:"\u2022 Use React.memo for expensive components"}),(0,T.jsx)("li",{children:"\u2022 Lazy load images and non-critical components"}),(0,T.jsx)("li",{children:"\u2022 Optimize bundle size with code splitting"})]})]}),(0,T.jsxs)("div",{className:"p-4 bg-purple-900/20 border border-purple-500/30 rounded-lg",children:[(0,T.jsx)("h4",{className:"text-purple-400 font-semibold mb-2",children:"Caching Strategy"}),(0,T.jsxs)("ul",{className:"text-gray-300 space-y-1 text-sm",children:[(0,T.jsx)("li",{children:"\u2022 Implement service worker for offline caching"}),(0,T.jsx)("li",{children:"\u2022 Use browser storage for user preferences"}),(0,T.jsx)("li",{children:"\u2022 Cache API responses with appropriate TTL"}),(0,T.jsx)("li",{children:"\u2022 Implement stale-while-revalidate pattern"})]})]}),(0,T.jsxs)("div",{className:"p-4 bg-yellow-900/20 border border-yellow-500/30 rounded-lg",children:[(0,T.jsx)("h4",{className:"text-yellow-400 font-semibold mb-2",children:"Real-time Optimization"}),(0,T.jsxs)("ul",{className:"text-gray-300 space-y-1 text-sm",children:[(0,T.jsx)("li",{children:"\u2022 Implement connection pooling for WebSockets"}),(0,T.jsx)("li",{children:"\u2022 Use message batching for high-frequency updates"}),(0,T.jsx)("li",{children:"\u2022 Add rate limiting to prevent spam"}),(0,T.jsx)("li",{children:"\u2022 Optimize subscription filters to reduce data transfer"})]})]})]})})]})})]})]})});var H}}}]);