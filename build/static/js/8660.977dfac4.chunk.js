"use strict";(self.webpackChunkpromptheroready=self.webpackChunkpromptheroready||[]).push([[8660],{98660:(e,s,a)=>{a.r(s),a.d(s,{default:()=>le});var t=a(89379),r=a(9950),l=a(38493),i=a(73281),n=a(68108),c=a(35097),d=a(29975),o=a(70446),m=a(61878),x=a(55120),h=a(42074),u=a(16255),j=a(388),p=a(93971),g=a(81064),N=a(21273),f=a(69293),v=a(44414);const b=e=>{let{member:s}=e;const[a,t]=r.useState(!1),{toast:i}=(0,N.dj)(),n=()=>{i({title:"Message initiated",description:"Opening chat with ".concat(s.name,"...")})},c=e=>{switch(e){case"online":return"bg-green-500";case"away":return"bg-yellow-500";default:return"bg-gray-500"}},d=e=>{switch(e){case"online":return"Online now";case"away":return"Away";default:return"Offline"}};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.Zp,{className:"workspace-card hover:shadow-lg transition-all group",children:(0,v.jsxs)(u.Wu,{className:"p-5",children:[(0,v.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsxs)("div",{className:"h-10 w-10 rounded-full bg-primary/20 flex items-center justify-center relative",children:[(0,v.jsx)("span",{className:"font-medium",children:s.avatar}),(0,v.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 h-3 w-3 rounded-full ".concat(c(s.status)," ring-2 ring-background"),title:d(s.status)})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"font-semibold text-lg text-white",children:s.name}),(0,v.jsx)("p",{className:"text-sm text-gray-400",children:s.role})]})]})}),(0,v.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,v.jsx)(j.A,{className:"h-4 w-4 text-gray-400"}),(0,v.jsx)("span",{className:"text-gray-400",children:s.email})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,v.jsx)(p.A,{className:"h-4 w-4 text-gray-400"}),(0,v.jsx)("span",{className:"text-gray-400",children:s.phone})]})]}),(0,v.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,v.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>t(!0),className:"flex-1 group-hover:border-primary/50 group-hover:text-primary transition-colors",children:[(0,v.jsx)(g.A,{className:"h-4 w-4 mr-2"}),"View Profile"]}),(0,v.jsxs)(l.$,{variant:"outline",size:"sm",onClick:n,className:"flex-1 group-hover:border-primary/50 group-hover:text-primary transition-colors",children:[(0,v.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Message"]})]})]})}),(0,v.jsx)(f.lG,{open:a,onOpenChange:t,children:(0,v.jsxs)(f.Cf,{className:"sm:max-w-md",children:[(0,v.jsxs)(f.c7,{children:[(0,v.jsx)(f.L3,{className:"text-xl",children:"Team Member Profile"}),(0,v.jsxs)(f.rr,{children:["View detailed information about ",s.name]})]}),(0,v.jsxs)("div",{className:"py-4",children:[(0,v.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,v.jsxs)("div",{className:"h-16 w-16 rounded-full bg-primary/20 flex items-center justify-center text-xl relative",children:[s.avatar,(0,v.jsx)("div",{className:"absolute bottom-0 right-0 h-4 w-4 rounded-full ".concat(c(s.status)," ring-2 ring-background"),title:d(s.status)})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-xl font-semibold",children:s.name}),(0,v.jsx)("p",{className:"text-muted-foreground",children:s.role})]})]}),(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-medium mb-2 text-sm text-muted-foreground",children:"CONTACT INFORMATION"}),(0,v.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[(0,v.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"}),(0,v.jsx)("span",{children:s.email})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted/50 rounded-md",children:[(0,v.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"}),(0,v.jsx)("span",{children:s.phone})]})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-medium mb-2 text-sm text-muted-foreground",children:"SKILLS"}),(0,v.jsx)("div",{className:"flex flex-wrap gap-1",children:["Product Strategy","UX Design","Marketing","Leadership"].map(e=>(0,v.jsx)("span",{className:"bg-primary/10 text-primary px-2 py-1 rounded-full text-xs",children:e},e))})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-medium mb-2 text-sm text-muted-foreground",children:"WORK HISTORY"}),(0,v.jsxs)("div",{className:"space-y-2 text-sm p-2 bg-muted/50 rounded-md",children:[(0,v.jsx)("p",{children:"Previously at: Google, Amazon"}),(0,v.jsx)("p",{children:"Education: Stanford University"}),(0,v.jsx)("p",{children:"Years of experience: 8+"})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-medium mb-2 text-sm text-muted-foreground",children:"CURRENT TASKS"}),(0,v.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,v.jsxs)("div",{className:"p-2 bg-muted/50 rounded-md flex items-center justify-between",children:[(0,v.jsx)("span",{children:"Update pitch deck"}),(0,v.jsx)("span",{className:"bg-yellow-500/20 text-yellow-500 px-2 py-0.5 rounded-full text-xs",children:"In Progress"})]}),(0,v.jsxs)("div",{className:"p-2 bg-muted/50 rounded-md flex items-center justify-between",children:[(0,v.jsx)("span",{children:"Investor outreach"}),(0,v.jsx)("span",{className:"bg-blue-500/20 text-blue-500 px-2 py-0.5 rounded-full text-xs",children:"Pending"})]})]})]})]})]}),(0,v.jsxs)(f.Es,{className:"flex justify-between sm:justify-between",children:[(0,v.jsx)(l.$,{variant:"outline",onClick:()=>t(!1),children:"Close"}),(0,v.jsxs)(l.$,{onClick:n,children:[(0,v.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Message"]})]})]})})]})};var y=a(14697),w=a(73315),A=a(95797),k=a(9449),C=a(30809),S=a(37063);const T=C.Ik({name:C.Yj().min(2,{message:"Name must be at least 2 characters."}),email:C.Yj().email({message:"Please enter a valid email address."}),role:C.Yj().min(2,{message:"Role must be at least 2 characters."}),phone:C.Yj().optional(),status:C.Yj().default("offline")}),E=["Co-Founder & CEO","Co-Founder & CTO","Product Manager","UX Designer","Frontend Developer","Backend Developer","Marketing Manager","Sales Executive","Customer Success Manager","Financial Advisor","Operations Manager","Data Scientist","Other"],M=e=>{let{isOpen:s,onClose:a,onAddMember:r}=e;const{toast:i}=(0,N.dj)(),n=(0,k.mN)({resolver:(0,S.u)(T),defaultValues:{name:"",email:"",role:"",phone:"",status:"offline"}});return(0,v.jsx)(f.lG,{open:s,onOpenChange:a,children:(0,v.jsxs)(f.Cf,{className:"sm:max-w-[485px]",children:[(0,v.jsxs)(f.c7,{children:[(0,v.jsxs)(f.L3,{className:"text-xl flex items-center gap-2",children:[(0,v.jsx)(c.A,{className:"h-5 w-5 text-primary"}),"Add Team Member"]}),(0,v.jsx)(f.rr,{children:"Add a new member to your startup team. They'll receive an invitation email."})]}),(0,v.jsx)(w.lV,(0,t.A)((0,t.A)({},n),{},{children:(0,v.jsxs)("form",{onSubmit:n.handleSubmit(e=>{const s=e.name.split(" "),t=s.length>1?"".concat(s[0][0]).concat(s[1][0]):e.name.substring(0,2),l={id:Date.now(),name:e.name,role:e.role,email:e.email,phone:e.phone||"Not provided",avatar:t.toUpperCase(),status:e.status};r(l),n.reset(),a()}),className:"space-y-4 py-4",children:[(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsx)(w.zB,{control:n.control,name:"name",render:e=>{let{field:s}=e;return(0,v.jsxs)(w.eI,{children:[(0,v.jsx)(w.lR,{children:"Full Name"}),(0,v.jsx)(w.MJ,{children:(0,v.jsx)(y.p,(0,t.A)({placeholder:"John Doe"},s))}),(0,v.jsx)(w.C5,{})]})}}),(0,v.jsx)(w.zB,{control:n.control,name:"email",render:e=>{let{field:s}=e;return(0,v.jsxs)(w.eI,{children:[(0,v.jsx)(w.lR,{children:"Email"}),(0,v.jsx)(w.MJ,{children:(0,v.jsx)(y.p,(0,t.A)({placeholder:"john@example.com"},s))}),(0,v.jsx)(w.C5,{})]})}})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsx)(w.zB,{control:n.control,name:"role",render:e=>{let{field:s}=e;return(0,v.jsxs)(w.eI,{children:[(0,v.jsx)(w.lR,{children:"Role"}),(0,v.jsxs)(A.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,v.jsx)(w.MJ,{children:(0,v.jsx)(A.bq,{children:(0,v.jsx)(A.yv,{placeholder:"Select a role"})})}),(0,v.jsx)(A.gC,{children:E.map(e=>(0,v.jsx)(A.eb,{value:e,children:e},e))})]}),(0,v.jsx)(w.C5,{})]})}}),(0,v.jsx)(w.zB,{control:n.control,name:"phone",render:e=>{let{field:s}=e;return(0,v.jsxs)(w.eI,{children:[(0,v.jsx)(w.lR,{children:"Phone (Optional)"}),(0,v.jsx)(w.MJ,{children:(0,v.jsx)(y.p,(0,t.A)({placeholder:"+1 (555) 123-4567"},s))}),(0,v.jsx)(w.C5,{})]})}})]}),(0,v.jsx)(w.zB,{control:n.control,name:"status",render:e=>{let{field:s}=e;return(0,v.jsxs)(w.eI,{children:[(0,v.jsx)(w.lR,{children:"Status"}),(0,v.jsxs)(A.l6,{onValueChange:s.onChange,defaultValue:s.value,children:[(0,v.jsx)(w.MJ,{children:(0,v.jsx)(A.bq,{children:(0,v.jsx)(A.yv,{placeholder:"Select a status"})})}),(0,v.jsxs)(A.gC,{children:[(0,v.jsx)(A.eb,{value:"online",children:"Online"}),(0,v.jsx)(A.eb,{value:"away",children:"Away"}),(0,v.jsx)(A.eb,{value:"offline",children:"Offline"})]})]}),(0,v.jsx)(w.C5,{})]})}}),(0,v.jsxs)(f.Es,{className:"pt-4",children:[(0,v.jsx)(l.$,{variant:"outline",type:"button",onClick:a,children:"Cancel"}),(0,v.jsx)(l.$,{type:"submit",children:"Add Member"})]})]})}))]})})},D=()=>(0,v.jsxs)(u.Zp,{className:"workspace-card mt-8",children:[(0,v.jsx)(u.aR,{children:(0,v.jsx)(u.ZB,{children:"Team Roles & Responsibilities"})}),(0,v.jsx)(u.Wu,{children:(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-medium mb-2",children:"Alex Johnson - CEO"}),(0,v.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-sm text-muted-foreground",children:[(0,v.jsx)("li",{children:"Business strategy and vision"}),(0,v.jsx)("li",{children:"Investor relations and fundraising"}),(0,v.jsx)("li",{children:"Team leadership and culture"}),(0,v.jsx)("li",{children:"Financial oversight"})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-medium mb-2",children:"Sarah Chen - CTO"}),(0,v.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-sm text-muted-foreground",children:[(0,v.jsx)("li",{children:"Technical architecture and roadmap"}),(0,v.jsx)("li",{children:"Engineering team leadership"}),(0,v.jsx)("li",{children:"Technology stack decisions"}),(0,v.jsx)("li",{children:"Security and technical debt"})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-medium mb-2",children:"Michael Rodriguez - Product Manager"}),(0,v.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-sm text-muted-foreground",children:[(0,v.jsx)("li",{children:"Product roadmap and features"}),(0,v.jsx)("li",{children:"User research and validation"}),(0,v.jsx)("li",{children:"Market analysis"}),(0,v.jsx)("li",{children:"Feature prioritization"})]})]})]})})]});var R=a(89615),I=a(41591),O=a(77737),F=a(52607);const P=e=>{let{tasks:s,onUpdateTask:a,onAddTask:i}=e;const{toast:n}=(0,N.dj)(),[c,d]=(0,r.useState)(!1),[m,x]=(0,r.useState)({title:"",description:"",assignee:"",dueDate:"",priority:"medium"});return(0,v.jsxs)("div",{className:"space-y-4",children:[s.map(e=>(0,v.jsx)(u.Zp,{className:"workspace-card transition-all hover:shadow-md",children:(0,v.jsxs)(u.Wu,{className:"p-4 flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsx)("button",{className:"h-5 w-5 rounded-full flex items-center justify-center ".concat("completed"===e.status?"bg-green-500":"border border-white/30"),onClick:()=>((e,s)=>{const t="completed"===s?"in-progress":"completed";a(e,t),n({title:"completed"===t?"Task completed":"Task reopened",description:"Task has been marked as ".concat(t,".")})})(e.id,e.status),"aria-label":"completed"===e.status?"Mark as incomplete":"Mark as complete",children:"completed"===e.status&&(0,v.jsx)(o.A,{className:"h-4 w-4 text-white"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("p",{className:"completed"===e.status?"line-through text-muted-foreground":"",children:e.title}),(0,v.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground",children:[(0,v.jsxs)("span",{children:["Assigned to: ",e.assignee]}),(0,v.jsx)("span",{className:"px-2 py-0.5 rounded-full ".concat("high"===e.priority?"bg-red-500/20 text-red-400":"medium"===e.priority?"bg-yellow-500/20 text-yellow-400":"bg-green-500/20 text-green-400"),children:e.priority})]})]})]}),(0,v.jsxs)("div",{className:"flex items-center gap-4",children:[(0,v.jsxs)("span",{className:"text-sm flex items-center gap-1",children:[(0,v.jsx)(O.A,{className:"h-3 w-3"}),e.dueDate]}),(0,v.jsx)(l.$,{variant:"ghost",size:"sm",children:"Edit"})]})]})},e.id)),(0,v.jsxs)(f.lG,{open:c,onOpenChange:d,children:[(0,v.jsx)(f.zM,{asChild:!0,children:(0,v.jsxs)(l.$,{variant:"outline",className:"w-full justify-center transition-all hover:bg-primary/10",children:[(0,v.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"Add New Task"]})}),(0,v.jsxs)(f.Cf,{className:"max-w-md",children:[(0,v.jsx)(f.c7,{children:(0,v.jsxs)(f.L3,{className:"flex items-center gap-2",children:[(0,v.jsx)(F.A,{className:"h-5 w-5"}),"Create New Task"]})}),(0,v.jsxs)("div",{className:"space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)(I.J,{htmlFor:"task-title",children:"Task Title *"}),(0,v.jsx)(y.p,{id:"task-title",placeholder:"Enter task title...",value:m.title,onChange:e=>x((0,t.A)((0,t.A)({},m),{},{title:e.target.value}))})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)(I.J,{htmlFor:"task-description",children:"Description"}),(0,v.jsx)(R.T,{id:"task-description",placeholder:"Add task description (optional)...",value:m.description,onChange:e=>x((0,t.A)((0,t.A)({},m),{},{description:e.target.value})),rows:3})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)(I.J,{htmlFor:"task-assignee",children:"Assign To *"}),(0,v.jsx)(y.p,{id:"task-assignee",placeholder:"Enter assignee name...",value:m.assignee,onChange:e=>x((0,t.A)((0,t.A)({},m),{},{assignee:e.target.value}))})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)(I.J,{htmlFor:"task-due-date",children:"Due Date *"}),(0,v.jsx)(y.p,{id:"task-due-date",type:"date",value:m.dueDate,onChange:e=>x((0,t.A)((0,t.A)({},m),{},{dueDate:e.target.value}))})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)(I.J,{htmlFor:"task-priority",children:"Priority"}),(0,v.jsxs)(A.l6,{value:m.priority,onValueChange:e=>x((0,t.A)((0,t.A)({},m),{},{priority:e})),children:[(0,v.jsx)(A.bq,{children:(0,v.jsx)(A.yv,{})}),(0,v.jsxs)(A.gC,{children:[(0,v.jsx)(A.eb,{value:"low",children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Low Priority"]})}),(0,v.jsx)(A.eb,{value:"medium",children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Medium Priority"]})}),(0,v.jsx)(A.eb,{value:"high",children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"High Priority"]})})]})]})]}),(0,v.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[(0,v.jsx)(l.$,{variant:"outline",onClick:()=>{x({title:"",description:"",assignee:"",dueDate:"",priority:"medium"}),d(!1)},children:"Cancel"}),(0,v.jsxs)(l.$,{onClick:()=>{if(!m.title.trim())return void n({title:"Error",description:"Task title is required",variant:"destructive"});if(!m.assignee.trim())return void n({title:"Error",description:"Please assign the task to someone",variant:"destructive"});if(!m.dueDate)return void n({title:"Error",description:"Please set a due date",variant:"destructive"});const e={title:m.title,assignee:m.assignee,dueDate:m.dueDate,status:"in-progress",priority:m.priority};i&&i(e),x({title:"",description:"",assignee:"",dueDate:"",priority:"medium"}),d(!1),n({title:"Success!",description:"New task has been created"})},children:[(0,v.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"Create Task"]})]})]})]})]})]})};var U=a(77834),z=a(60348),$=a(43590),L=a(60330),B=a(42989),V=a(52828),Z=a(16243),W=a(27453),J=a(2737),_=a(27549),q=a(91367);const Y=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return e.length<=s?e:e.substring(0,s)+"..."},G=()=>"@user".concat(Date.now().toString().slice(-4)),H=e=>{const s=new Date(e),a=new Date,t=Math.floor((a.getTime()-s.getTime())/6e4);if(t<1)return"just now";if(t<60)return"".concat(t,"m ago");const r=Math.floor(t/60);if(r<24)return"".concat(r,"h ago");const l=Math.floor(r/24);return l<7?"".concat(l,"d ago"):s.toLocaleDateString()},K=e=>e.trim().length>0&&e.length<=500,X=e=>{let{teamId:s}=e;const[a,t]=(0,r.useState)([]),[i,n]=(0,r.useState)(""),[c,o]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[j,p]=(0,r.useState)(!0),[g,f]=(0,r.useState)(!1),[b,w]=(0,r.useState)(""),[A,k]=(0,r.useState)(!0),[C,S]=(0,r.useState)(0),[T,E]=(0,r.useState)(!1),{toast:M}=(0,N.dj)(),{user:D,session:R}=(0,q.A)(),I=(0,r.useRef)(null),O=(0,r.useRef)(null),F=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{try{let a;var e,s;if(R&&D)a=(null===(e=D.user_metadata)||void 0===e?void 0:e.user_name)||(null===(s=D.email)||void 0===s?void 0:s.split("@")[0])||G();else a=localStorage.getItem("chat_username")||G();o(a),localStorage.setItem("chat_username",a);const t=await(async()=>{try{const e=localStorage.getItem("countryCode");if(e&&"undefined"!==e)return e;const s=await fetch("https://api.db-ip.com/v2/free/self"),{countryCode:a,error:t}=await s.json();if(t)throw new Error(t);return localStorage.setItem("countryCode",a),a}catch(b){console.error("Error getting location from api.db-ip.com:",b);const s={"America/New_York":"US","America/Los_Angeles":"US","America/Chicago":"US","America/Denver":"US","Europe/London":"GB","Europe/Paris":"FR","Europe/Berlin":"DE","Europe/Rome":"IT","Europe/Madrid":"ES","Asia/Tokyo":"JP","Asia/Seoul":"KR","Asia/Shanghai":"CN","Asia/Kolkata":"IN","Australia/Sydney":"AU","America/Toronto":"CA","America/Sao_Paulo":"BR","Europe/Amsterdam":"NL","Europe/Stockholm":"SE","Europe/Oslo":"NO","Europe/Copenhagen":"DK","Europe/Helsinki":"FI"}[Intl.DateTimeFormat().resolvedOptions().timeZone]||"US";return localStorage.setItem("countryCode",s),s}})();h(t)}catch(b){console.error("Error initializing user:",b),o(G()),h("US")}})()},[R,D]),(0,r.useEffect)(()=>{if(!c)return;return(async()=>{try{w("");const{data:e,error:s}=await _.ND.from("messages").select("*").range(0,49).order("id",{ascending:!1});if(s)throw s;t(e||[]),E(!0),p(!1)}catch(b){console.error("Error fetching messages:",b),w(b.message),p(!1)}})(),F.current&&_.ND.removeChannel(F.current),F.current=_.ND.channel("custom-all-channel").on("postgres_changes",{event:"*",schema:"public",table:"messages"},e=>{"INSERT"===e.eventType&&(t(s=>[e.new,...s]),e.new.username!==c?S(e=>e+1):P())}).subscribe(),()=>{F.current&&_.ND.removeChannel(F.current)}},[c]),(0,r.useEffect)(()=>{T&&(E(!1),P())},[a,T]);const P=(0,r.useCallback)(()=>{I.current&&I.current.scrollIntoView({behavior:"smooth"})},[]),U=(0,r.useCallback)(e=>{const{scrollTop:s,scrollHeight:t,clientHeight:r}=e.currentTarget,l=t-s<=r+1;k(l),l&&S(0),0===s&&a.length>0&&X()},[a.length]),X=async()=>{try{const{data:e,error:s}=await _.ND.from("messages").select("*").range(a.length,a.length+49).order("id",{ascending:!1});if(s)throw s;e&&e.length>0&&(t(s=>[...s,...e]),O.current&&(O.current.scrollTop=1))}catch(b){console.error("Error loading more messages:",b),M({title:"Error",description:"Failed to load more messages",variant:"destructive"})}},Q=()=>{p(!0),w(""),window.location.reload()};return j?(0,v.jsx)(u.Zp,{className:"workspace-card",children:(0,v.jsx)(u.Wu,{className:"flex items-center justify-center h-96",children:(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(B.A,{className:"h-4 w-4 animate-spin"}),(0,v.jsx)("span",{children:"Loading chat..."})]})})}):b?(0,v.jsx)(u.Zp,{className:"workspace-card",children:(0,v.jsxs)(u.Wu,{className:"flex flex-col items-center justify-center h-96 gap-4",children:[(0,v.jsx)(V.A,{className:"h-8 w-8 text-destructive"}),(0,v.jsx)("p",{className:"text-center text-muted-foreground",children:b}),(0,v.jsx)(l.$,{onClick:Q,variant:"outline",children:"Try to reconnect"})]})}):(0,v.jsxs)(u.Zp,{className:"workspace-card",children:[(0,v.jsx)(u.aR,{children:(0,v.jsxs)(u.ZB,{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(m.A,{className:"h-5 w-5"}),"Real-time Chat"]}),(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(d.A,{className:"h-4 w-4"}),(0,v.jsxs)(z.E,{variant:"secondary",children:[a.length," messages"]})]})]})}),(0,v.jsxs)(u.Wu,{className:"space-y-4",children:[(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)($.F,{className:"h-96 pr-4",ref:O,onScrollCapture:U,children:0===a.length?(0,v.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No messages yet \ud83d\ude1e"}):(0,v.jsxs)("div",{className:"space-y-3",children:[[...a].reverse().map(e=>{const s=e.username===c,a=(e=>{if(!e||"undefined"===e)return"\ud83c\udf0d";const s=e.toUpperCase().split("").map(e=>127397+e.charCodeAt(0));return String.fromCodePoint(...s)})(e.country);return(0,v.jsxs)("div",{className:"flex gap-3 ".concat(s?"justify-end":"justify-start"),children:[!s&&(0,v.jsx)(L.eu,{className:"h-8 w-8",children:(0,v.jsx)(L.q5,{className:"text-xs",children:e.username.charAt(0).toUpperCase()})}),(0,v.jsx)("div",{className:"max-w-[70%] ".concat(s?"order-first":""),children:(0,v.jsxs)("div",{className:"rounded-lg p-3 ".concat(s?"bg-primary text-primary-foreground ml-auto":"bg-muted"),children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,v.jsx)("span",{className:"font-medium text-sm",children:e.username}),e.is_authenticated&&(0,v.jsx)(Z.A,{className:"h-3 w-3 text-green-500"}),a&&(0,v.jsx)("span",{className:"text-xs",title:e.country,children:a})]}),(0,v.jsx)("p",{className:"text-sm break-words",children:Y(e.text)}),(0,v.jsx)("p",{className:"text-xs opacity-70 mt-1",children:H(e.timestamp)})]})}),s&&(0,v.jsx)(L.eu,{className:"h-8 w-8",children:(0,v.jsx)(L.q5,{className:"text-xs",children:e.username.charAt(0).toUpperCase()})})]},e.id)}),(0,v.jsx)("div",{ref:I})]})}),!A&&(0,v.jsxs)(l.$,{size:"sm",className:"absolute bottom-2 right-2 rounded-full h-8 w-8 p-0",onClick:P,children:[(0,v.jsx)(W.A,{className:"h-4 w-4"}),C>0&&(0,v.jsx)(z.E,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 p-0 text-xs",children:C})]})]}),(0,v.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!K(i)||g)return;const s=i.trim().replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/<[^>]*>/g,"").substring(0,500);f(!0),n("");try{const{error:e}=await _.ND.from("messages").insert([{text:s,username:c,country:x,is_authenticated:!!R}]);if(e)throw e}catch(b){console.error("Error sending message:",b),n(s),M({title:"Error",description:b.message||"Failed to send message",variant:"destructive"})}finally{f(!1)}},className:"flex gap-2",children:[(0,v.jsx)(y.p,{placeholder:"Type your message...",value:i,onChange:e=>n(e.target.value),maxLength:500,disabled:g,className:"flex-1"}),(0,v.jsx)(l.$,{type:"submit",disabled:!K(i)||g,size:"icon",children:g?(0,v.jsx)(B.A,{className:"h-4 w-4 animate-spin"}):(0,v.jsx)(J.A,{className:"h-4 w-4"})})]}),(0,v.jsx)("p",{className:"text-xs text-muted-foreground text-center",children:"\u26a0\ufe0f Warning: do not share any sensitive information, it's a public chat room \ud83d\ude42"})]})]})},Q=e=>{let{teamId:s}=e;const{toast:a}=(0,N.dj)();return(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsx)(X,{teamId:s}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsx)(u.Zp,{className:"workspace-card hover:shadow-md transition-all",children:(0,v.jsxs)(u.Wu,{className:"p-6",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,v.jsx)(x.A,{className:"h-5 w-5 text-green-400"}),(0,v.jsx)("h3",{className:"font-medium text-white",children:"Video Meetings"})]}),(0,v.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"Launch video meetings directly from chat (Coming Soon)"}),(0,v.jsxs)(l.$,{variant:"outline",className:"w-full bg-green-600/20 border-green-500/30 text-green-400 hover:bg-green-600/30",onClick:()=>{a({title:"Starting meeting",description:"Setting up your video call..."})},children:[(0,v.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Start Meeting"]})]})}),(0,v.jsx)(u.Zp,{className:"workspace-card hover:shadow-md transition-all",children:(0,v.jsxs)(u.Wu,{className:"p-6",children:[(0,v.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,v.jsx)(U.A,{className:"h-5 w-5 text-blue-400"}),(0,v.jsx)("h3",{className:"font-medium text-white",children:"File Sharing"})]}),(0,v.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"Share documents and files with your team (Coming Soon)"}),(0,v.jsxs)(l.$,{variant:"outline",className:"w-full bg-blue-600/20 border-blue-500/30 text-blue-400 hover:bg-blue-600/30",onClick:()=>{a({title:"File sharing",description:"Opening file upload dialog..."})},children:[(0,v.jsx)(U.A,{className:"h-4 w-4 mr-2"}),"Upload Files"]})]})})]})]})};var ee=a(27304),se=a(25692),ae=a(19201);const te=e=>{let{meetings:s}=e;const{toast:a}=(0,N.dj)(),t=e=>{a({title:"\ud83d\ude80 Coming Soon!",description:"".concat(e," feature is under development and will be available soon.")})};return(0,v.jsxs)("div",{className:"space-y-6",children:[(0,v.jsx)(u.Zp,{className:"workspace-card text-center",children:(0,v.jsx)(u.Wu,{className:"p-8 md:p-12",children:(0,v.jsxs)("div",{className:"flex flex-col items-center space-y-6",children:[(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-green-400/20 to-blue-400/20 rounded-full blur-xl"}),(0,v.jsx)("div",{className:"relative bg-gradient-to-r from-green-500 to-blue-500 p-4 rounded-full",children:(0,v.jsx)(x.A,{className:"h-8 w-8 text-white"})})]}),(0,v.jsxs)("div",{className:"space-y-3",children:[(0,v.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,v.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-white",children:"Video Meetings"}),(0,v.jsx)(z.E,{className:"bg-gradient-to-r from-green-500/20 to-blue-500/20 text-green-400 border border-green-500/30",children:"Coming Soon"})]}),(0,v.jsx)("p",{className:"text-gray-400 max-w-md mx-auto",children:"High-quality video conferencing with screen sharing, recording, and AI-powered meeting summaries."})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-full max-w-2xl",children:[(0,v.jsxs)("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4 border border-white/10",children:[(0,v.jsx)(x.A,{className:"h-6 w-6 text-green-400 mb-2 mx-auto"}),(0,v.jsx)("h3",{className:"font-medium text-white text-sm",children:"HD Video Calls"}),(0,v.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Crystal clear video quality"})]}),(0,v.jsxs)("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4 border border-white/10",children:[(0,v.jsx)(d.A,{className:"h-6 w-6 text-blue-400 mb-2 mx-auto"}),(0,v.jsx)("h3",{className:"font-medium text-white text-sm",children:"Team Collaboration"}),(0,v.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Up to 50 participants"})]}),(0,v.jsxs)("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-4 border border-white/10",children:[(0,v.jsx)(ee.A,{className:"h-6 w-6 text-purple-400 mb-2 mx-auto"}),(0,v.jsx)("h3",{className:"font-medium text-white text-sm",children:"AI Summaries"}),(0,v.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Auto-generated notes"})]})]}),(0,v.jsxs)(l.$,{variant:"outline",className:"bg-gradient-to-r from-green-600/20 to-blue-600/20 border-green-500/30 text-green-400 hover:bg-gradient-to-r hover:from-green-600/30 hover:to-blue-600/30",onClick:()=>t("Video Meetings"),children:[(0,v.jsx)(se.A,{className:"h-4 w-4 mr-2"}),"Get Notified When Ready"]})]})})}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,v.jsxs)(u.Zp,{className:"workspace-card",children:[(0,v.jsx)(u.aR,{children:(0,v.jsxs)(u.ZB,{className:"flex items-center gap-2 text-white",children:[(0,v.jsx)(ae.A,{className:"h-5 w-5 text-green-400"}),"Smart Scheduling"]})}),(0,v.jsxs)(u.Wu,{className:"space-y-3",children:[(0,v.jsx)("p",{className:"text-sm text-gray-400",children:"AI-powered meeting scheduler that finds the best time for all team members."}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,v.jsx)(O.A,{className:"h-3 w-3"}),(0,v.jsx)("span",{children:"Timezone detection"})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,v.jsx)(d.A,{className:"h-3 w-3"}),(0,v.jsx)("span",{children:"Availability sync"})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,v.jsx)(ee.A,{className:"h-3 w-3"}),(0,v.jsx)("span",{children:"Smart suggestions"})]})]}),(0,v.jsx)(l.$,{variant:"ghost",size:"sm",className:"w-full text-green-400 hover:bg-green-500/10",onClick:()=>t("Smart Scheduling"),children:"Learn More"})]})]}),(0,v.jsxs)(u.Zp,{className:"workspace-card",children:[(0,v.jsx)(u.aR,{children:(0,v.jsxs)(u.ZB,{className:"flex items-center gap-2 text-white",children:[(0,v.jsx)(x.A,{className:"h-5 w-5 text-blue-400"}),"Meeting Rooms"]})}),(0,v.jsxs)(u.Wu,{className:"space-y-3",children:[(0,v.jsx)("p",{className:"text-sm text-gray-400",children:"Persistent virtual rooms for your team with custom backgrounds and layouts."}),(0,v.jsxs)("div",{className:"space-y-2",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,v.jsx)(x.A,{className:"h-3 w-3"}),(0,v.jsx)("span",{children:"Screen sharing"})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,v.jsx)(d.A,{className:"h-3 w-3"}),(0,v.jsx)("span",{children:"Breakout rooms"})]}),(0,v.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,v.jsx)(ee.A,{className:"h-3 w-3"}),(0,v.jsx)("span",{children:"Recording & transcripts"})]})]}),(0,v.jsx)(l.$,{variant:"ghost",size:"sm",className:"w-full text-blue-400 hover:bg-blue-500/10",onClick:()=>t("Meeting Rooms"),children:"Learn More"})]})]})]})]})};var re=a(76564);const le=()=>{const[e,s]=(0,r.useState)(!1),[a,u]=(0,r.useState)("team"),[j,p]=(0,r.useState)(!1),{toast:g}=(0,N.dj)(),{user:f}=(0,q.A)(),[y,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(f)try{var e;const{data:s,error:a}=await _.ND.from("teams").select("id").eq("owner_id",f.id).single();if(a&&"PGRST116"!==a.code)return void console.error("Error fetching team:",a);if(s)return void w(s.id);const{data:t,error:r}=await _.ND.from("teams").insert([{name:"".concat((null===(e=f.email)||void 0===e?void 0:e.split("@")[0])||"My","'s Team"),description:"Default team",owner_id:f.id}]).select().single();if(r)return void console.error("Error creating team:",r);w(t.id)}catch(s){console.error("Error in team setup:",s)}})()},[f]);const[A,k]=(0,r.useState)([]),[C,S]=(0,r.useState)([]);(0,r.useEffect)(()=>{document.querySelectorAll('[role="tabpanel"]').forEach(e=>{e.classList.add("animate-fade-in")})},[a]);return(0,v.jsxs)("div",{className:"layout-container bg-gradient-to-br from-black via-gray-900 to-green-950",children:[(0,v.jsx)(re.A,{isOpen:e,setIsOpen:s}),(0,v.jsxs)("main",{className:"layout-main transition-all duration-300",children:[(0,v.jsx)("div",{className:"sticky top-0 z-10 bg-black/80 backdrop-blur-xl border-b border-white/10",children:(0,v.jsx)("div",{className:"px-6 py-4",children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center gap-4",children:[(0,v.jsx)(re.R,{onClick:()=>s(!0)}),(0,v.jsxs)(h.N_,{to:"/workspace",className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors text-sm",children:[(0,v.jsx)(n.A,{className:"h-4 w-4"}),(0,v.jsx)("span",{children:"Back to Workspace"})]})]}),(0,v.jsxs)(l.$,{onClick:()=>p(!0),className:"bg-green-600 hover:bg-green-700",children:[(0,v.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Add Member"]})]})})}),(0,v.jsxs)("div",{className:"px-6 py-8",children:[(0,v.jsx)("div",{className:"mb-8",children:(0,v.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,v.jsx)(d.A,{className:"h-8 w-8 text-green-400"}),(0,v.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-white",children:"TeamSpace"})]}),(0,v.jsx)("p",{className:"text-gray-400 text-lg",children:"Collaborate and manage your team effectively"})]}),(0,v.jsxs)("div",{className:"flex gap-4",children:[(0,v.jsx)("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-3 border border-white/10",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"text-2xl font-bold text-white",children:A.length}),(0,v.jsx)("div",{className:"text-xs text-gray-400",children:"Team Members"})]})}),(0,v.jsx)("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-3 border border-white/10",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"text-2xl font-bold text-white",children:C.filter(e=>"completed"===e.status).length}),(0,v.jsx)("div",{className:"text-xs text-gray-400",children:"Tasks Done"})]})}),(0,v.jsx)("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-3 border border-white/10",children:(0,v.jsxs)("div",{className:"text-center",children:[(0,v.jsx)("div",{className:"text-2xl font-bold text-green-400",children:"Active"}),(0,v.jsx)("div",{className:"text-xs text-gray-400",children:"Chat Status"})]})})]})]})}),(0,v.jsxs)(i.tU,{defaultValue:"team",value:a,onValueChange:u,className:"w-full",children:[(0,v.jsx)("div",{className:"border-b mb-4 md:mb-6",children:(0,v.jsxs)(i.j7,{className:"bg-transparent h-12 p-0 -mb-px overflow-x-auto flex-nowrap",children:[(0,v.jsxs)(i.Xi,{value:"team",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none px-4 md:px-6 h-12 whitespace-nowrap",children:[(0,v.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Team"]}),(0,v.jsxs)(i.Xi,{value:"tasks",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none px-4 md:px-6 h-12 whitespace-nowrap",children:[(0,v.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Tasks"]}),(0,v.jsxs)(i.Xi,{value:"messages",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none px-4 md:px-6 h-12 whitespace-nowrap",children:[(0,v.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Chat"]}),(0,v.jsxs)(i.Xi,{value:"meetings",className:"data-[state=active]:border-b-2 data-[state=active]:border-primary rounded-none px-4 md:px-6 h-12 whitespace-nowrap",children:[(0,v.jsx)(x.A,{className:"h-4 w-4 mr-2"}),"Meetings"]})]})}),(0,v.jsxs)(i.av,{value:"team",className:"animate-fade-in mt-0",children:[(0,v.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[A.map(e=>(0,v.jsx)(b,{member:e},e.id)),(0,v.jsx)("div",{className:"border border-dashed border-border rounded-lg flex flex-col items-center justify-center cursor-pointer h-full min-h-[200px] hover:bg-accent/50 transition-colors",onClick:()=>p(!0),children:(0,v.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 md:p-6 h-full",children:[(0,v.jsx)("div",{className:"rounded-full bg-primary/10 p-3 mb-4",children:(0,v.jsx)(c.A,{className:"h-6 w-6 text-primary"})}),(0,v.jsx)("p",{className:"font-medium",children:"Add Team Member"}),(0,v.jsx)("p",{className:"text-sm text-muted-foreground text-center mt-2",children:"Invite someone to join your startup team"})]})})]}),(0,v.jsx)(D,{})]}),(0,v.jsx)(i.av,{value:"tasks",className:"animate-fade-in mt-0",children:(0,v.jsx)(P,{tasks:C,onUpdateTask:(e,s)=>{S(C.map(a=>a.id===e?(0,t.A)((0,t.A)({},a),{},{status:s}):a))},onAddTask:e=>{const s=(0,t.A)({id:Math.max(...C.map(e=>e.id),0)+1},e);S([...C,s]),g({title:"\u2705 Task Created",description:'New task "'.concat(s.title,'" has been assigned to ').concat(s.assignee,".")})}})}),(0,v.jsx)(i.av,{value:"messages",className:"animate-fade-in mt-0",children:y?(0,v.jsx)(Q,{teamId:y}):(0,v.jsx)("div",{className:"text-center py-8",children:(0,v.jsx)("p",{className:"text-muted-foreground",children:"Loading team chat..."})})}),(0,v.jsx)(i.av,{value:"meetings",className:"animate-fade-in mt-0",children:(0,v.jsx)(te,{meetings:[]})})]})]}),(0,v.jsx)(M,{isOpen:j,onClose:()=>p(!1),onAddMember:e=>{k([...A,e]),g({title:"\ud83c\udf89 Team member added",description:"".concat(e.name," has been added to your team.")})}})]})]})}}}]);