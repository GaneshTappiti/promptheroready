"use strict";(self.webpackChunkpromptheroready=self.webpackChunkpromptheroready||[]).push([[630],{90630:(s,e,a)=>{a.r(e),a.d(e,{default:()=>b});var t=a(89379),n=a(9950),c=a(38493),r=a(14697),i=a(41591),o=a(16255),l=a(27711),u=a(60348),d=a(91367),m=a(27549);const g=async()=>{try{const{data:s,error:e}=await m.ND.auth.getSession();return e?{success:!1,message:"Failed to connect to Supabase",error:e}:{success:!0,message:"Supabase connection successful",data:s}}catch(s){return{success:!1,message:"Supabase connection failed",error:s}}},h=async(s,e)=>{try{const{data:a,error:t}=await m.ND.auth.signUp({email:s,password:e,options:{emailRedirectTo:"".concat(window.location.origin,"/auth/callback")}});return t?{success:!1,message:"Sign up failed: ".concat(t.message),error:t}:{success:!0,message:"Sign up successful! Check your email for verification.",data:a}}catch(a){return{success:!1,message:"Sign up failed with unexpected error",error:a}}},x=async(s,e)=>{try{const{data:a,error:t}=await m.ND.auth.signInWithPassword({email:s,password:e});return t?{success:!1,message:"Sign in failed: ".concat(t.message),error:t}:{success:!0,message:"Sign in successful!",data:a}}catch(a){return{success:!1,message:"Sign in failed with unexpected error",error:a}}},p=async()=>{try{const{error:s}=await m.ND.auth.signOut();return s?{success:!1,message:"Sign out failed: ".concat(s.message),error:s}:{success:!0,message:"Sign out successful!"}}catch(s){return{success:!1,message:"Sign out failed with unexpected error",error:s}}},w=async()=>{console.log("\ud83e\uddea Running Authentication Tests...\n"),console.log("1. Testing Supabase Connection...");const s=await g();console.log("   ".concat(s.success?"\u2705":"\u274c"," ").concat(s.message)),s.success||console.error("   Error:",s.error),console.log("\n2. Testing Current Session...");const e=await(async()=>{try{const{data:{session:s},error:e}=await m.ND.auth.getSession();return e?{success:!1,message:"Failed to get session: ".concat(e.message),error:e}:{success:!0,message:s?"User is authenticated":"No active session",data:s}}catch(s){return{success:!1,message:"Failed to get session with unexpected error",error:s}}})();var a,t;(console.log("   ".concat(e.success?"\u2705":"\u274c"," ").concat(e.message)),e.data)&&console.log("   User:",null===(a=e.data)||void 0===a||null===(t=a.user)||void 0===t?void 0:t.email);return console.log("\n\ud83e\uddea Authentication Tests Complete!"),{connection:s,session:e}};var y=a(30621),j=a(45833),N=a(81850),S=a(42989),v=a(81064),f=a(15332),C=a(44414);function b(){const{user:s,signIn:e,signUp:a,signOut:m}=(0,d.A)(),[b,k]=(0,n.useState)("test@example.com"),[A,T]=(0,n.useState)("testpassword123"),[F,U]=(0,n.useState)(!1),[E,O]=(0,n.useState)([]),[$,I]=(0,n.useState)(null);(0,n.useEffect)(()=>{R()},[]);const R=async()=>{const s=await g();I(s)};return(0,C.jsx)("div",{className:"min-h-screen bg-green-glass p-6",children:(0,C.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,C.jsxs)(o.Zp,{className:"workspace-card",children:[(0,C.jsx)(o.aR,{children:(0,C.jsxs)(o.ZB,{className:"text-white flex items-center gap-2",children:[(0,C.jsx)(y.A,{className:"h-5 w-5"}),"Authentication Test Suite"]})}),(0,C.jsxs)(o.Wu,{className:"space-y-6",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("span",{className:"text-gray-400",children:"Supabase Connection:"}),$?(0,C.jsx)(u.E,{variant:$.success?"default":"destructive",children:$.success?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(j.A,{className:"h-3 w-3 mr-1"})," Connected"]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(N.A,{className:"h-3 w-3 mr-1"})," Failed"]})}):(0,C.jsxs)(u.E,{variant:"secondary",children:[(0,C.jsx)(S.A,{className:"h-3 w-3 mr-1 animate-spin"})," Testing..."]})]}),(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[(0,C.jsx)("span",{className:"text-gray-400",children:"Current User:"}),s?(0,C.jsxs)(u.E,{variant:"default",children:[(0,C.jsx)(v.A,{className:"h-3 w-3 mr-1"})," ",s.email]}):(0,C.jsx)(u.E,{variant:"secondary",children:"Not authenticated"})]}),(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(i.J,{htmlFor:"test-email",children:"Test Email"}),(0,C.jsx)(r.p,{id:"test-email",type:"email",value:b,onChange:s=>k(s.target.value),className:"workspace-input"})]}),(0,C.jsxs)("div",{className:"space-y-2",children:[(0,C.jsx)(i.J,{htmlFor:"test-password",children:"Test Password"}),(0,C.jsx)(r.p,{id:"test-password",type:"password",value:A,onChange:s=>T(s.target.value),className:"workspace-input"})]})]}),(0,C.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,C.jsx)(c.$,{onClick:async()=>{U(!0),O([]);try{const s=await w();O([(0,t.A)({name:"Supabase Connection"},s.connection),(0,t.A)({name:"Current Session"},s.session)])}catch(s){console.error("Test error:",s)}finally{U(!1)}},disabled:F,className:"workspace-button",children:F?(0,C.jsx)(S.A,{className:"h-4 w-4 animate-spin"}):"Run All Tests"}),(0,C.jsx)(c.$,{onClick:async()=>{U(!0);try{const s=await h(b,A);O(e=>[...e,(0,t.A)({name:"Sign Up Test"},s)])}catch(s){console.error("Sign up test error:",s)}finally{U(!1)}},disabled:F,variant:"outline",className:"workspace-button-secondary",children:"Test Sign Up"}),(0,C.jsx)(c.$,{onClick:async()=>{U(!0);try{const s=await x(b,A);O(e=>[...e,(0,t.A)({name:"Sign In Test"},s)])}catch(s){console.error("Sign in test error:",s)}finally{U(!1)}},disabled:F,variant:"outline",className:"workspace-button-secondary",children:"Test Sign In"}),(0,C.jsx)(c.$,{onClick:async()=>{U(!0);try{const s=await p();O(e=>[...e,(0,t.A)({name:"Sign Out Test"},s)])}catch(s){console.error("Sign out test error:",s)}finally{U(!1)}},disabled:F,variant:"outline",className:"workspace-button-secondary",children:"Test Sign Out"})]}),(0,C.jsxs)("div",{className:"border-t border-white/10 pt-4",children:[(0,C.jsx)("h3",{className:"text-white font-medium mb-3",children:"Auth Context Tests"}),(0,C.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,C.jsx)(c.$,{onClick:async()=>{U(!0);try{const s=await a(b,A);O(e=>[...e,{name:"Context Sign Up",success:!s.error,message:s.error?s.error.message:"Sign up successful via context"}])}catch(s){console.error("Context sign up error:",s)}finally{U(!1)}},disabled:F,variant:"outline",className:"workspace-button-secondary",children:"Context Sign Up"}),(0,C.jsx)(c.$,{onClick:async()=>{U(!0);try{const s=await e(b,A);O(e=>[...e,{name:"Context Sign In",success:!s.error,message:s.error?s.error.message:"Sign in successful via context"}])}catch(s){console.error("Context sign in error:",s)}finally{U(!1)}},disabled:F,variant:"outline",className:"workspace-button-secondary",children:"Context Sign In"}),(0,C.jsxs)(c.$,{onClick:async()=>{U(!0);try{await m(),O(s=>[...s,{name:"Context Sign Out",success:!0,message:"Sign out successful via context"}])}catch(s){console.error("Context sign out error:",s),O(s=>[...s,{name:"Context Sign Out",success:!1,message:"Sign out failed via context"}])}finally{U(!1)}},disabled:F,variant:"outline",className:"workspace-button-secondary",children:[(0,C.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Context Sign Out"]})]})]})]})]}),E.length>0&&(0,C.jsxs)(o.Zp,{className:"workspace-card",children:[(0,C.jsx)(o.aR,{children:(0,C.jsx)(o.ZB,{className:"text-white",children:"Test Results"})}),(0,C.jsx)(o.Wu,{className:"space-y-3",children:E.map((s,e)=>(0,C.jsxs)(l.Fc,{variant:s.success?"default":"destructive",children:[(0,C.jsxs)("div",{className:"flex items-center gap-2",children:[s.success?(0,C.jsx)(j.A,{className:"h-4 w-4 text-green-500"}):(0,C.jsx)(N.A,{className:"h-4 w-4 text-red-500"}),(0,C.jsx)("span",{className:"font-medium",children:s.name})]}),(0,C.jsx)(l.TN,{className:"mt-2",children:s.message})]},e))})]})]})})}}}]);